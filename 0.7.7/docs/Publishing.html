<html>
 <head> 
  <title>Publishing</title> 
 </head> 
 <body> 
  <div id="wikipage"> 
   <table> 
    <tbody>
     <tr> 
      <td style="vertical-align:top; padding-left:5px"> 
       <div id="wikiheader"> 
        <span style="font-size:120%;font-weight:bold">Publishing</span> &nbsp; 
        <div>  
        </div> 
       </div> 
       <div id="wikicontent"> 
        <div class="vt" id="wikimaincol"> 
         <h1><a name="Publish"></a>Publish<a href="#Publish" class="section_anchor"></a></h1>
         <p>This page describes how to publish your project. Publishing consists of uploading a descriptor, such as an Ivy file or Maven POM, and artifacts, such as a jar or war, to a repository so that other projects can specify your project as a dependency. </p>
         <p>The <tt>publish-local</tt> action is used to publish your project to a local Ivy repository. By default, this local repository is in <tt>${user.home}/.ivy2/local</tt>. You can then use this project from other projects on the same machine. </p>
         <p>The <tt>publish</tt> action is used to publish your project to a remote repository. To use publishing, you need to specify the repository to publish to and the credentials to use. To specify the repository, assign a repository to <tt>val publishTo</tt> and define the publishing style. For example, to upload to Nexus: </p>
         <pre class="prettyprint">  override def managedStyle = ManagedStyle.Maven
  val publishTo = &quot;Scala Tools Nexus&quot; at &quot;http://nexus.scala-tools.org/content/repositories/releases/&quot;</pre>
         <p>There are two ways to specify credentials for such a repository. The first is to specify them inline: </p>
         <pre class="prettyprint">  Credentials.add(&quot;Sonatype Nexus Repository Manager&quot;, &quot;nexus.scala-tools.org&quot;, &quot;admin&quot;, &quot;admin123&quot;)</pre>
         <p>The second and better way is to load them from a file, for example: </p>
         <pre class="prettyprint">  Credentials(Path.userHome / &quot;.ivy2&quot; / &quot;.credentials&quot;, log)</pre>
         <p>The credentials file is a properties file with keys <tt>realm</tt>, <tt>host</tt>, <tt>user</tt>, and <tt>password</tt>. For example: </p>
         <pre class="prettyprint">realm=Sonatype Nexus Repository Manager
host=nexus.scala-tools.org
user=admin
password=admin123</pre>
         <p>Once this is set up, you can run <tt>publish</tt>. Even better, enable <a href="CrossBuild">cross-building</a> and do <tt>+publish</tt>. See <a href="Resolvers">Resolvers</a> for other supported repositories. </p>
         <p>By default, the artifact to publish is a war for <tt>DefaultWebProject</tt> and a jar for <tt>DefaultProject</tt>. You can declare other types of artifacts to publish by defining <tt>Artifact</tt> instances. See the <a href="Artifacts">Artifacts</a> page for details. </p>
         <p>To publish sources and javadocs, add artifact declarations and make the <tt>publish-local</tt> and <tt>publish</tt> actions depend on <tt>package-src</tt> and <tt>package-docs</tt>: </p>
         <pre class="prettyprint">  override def packageDocsJar = defaultJarPath(&quot;-javadoc.jar&quot;)
  override def packageSrcJar= defaultJarPath(&quot;-sources.jar&quot;)
  val sourceArtifact = Artifact.sources(artifactID)
  val docsArtifact = Artifact.javadoc(artifactID)
  override def packageToPublishActions = super.packageToPublishActions ++ Seq(packageDocs, packageSrc)</pre>
         <p>When <tt>managedStyle</tt> is <tt>ManagedStyle.Maven</tt>, a POM is generated by the <tt>make-pom</tt> action. Override the 'pomExtra' method to provide XML (<tt>scala.xml.NodeSeq</tt>) to insert directly into the generated pom. For example: </p>
         <pre class="prettyprint">override def pomExtra =
&lt;licenses&gt;
  &lt;license&gt;
    &lt;name&gt;Apache 2&lt;/name&gt;
    &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;
    &lt;distribution&gt;repo&lt;/distribution&gt;
  &lt;/license&gt;
&lt;/licenses&gt;</pre>
         <p>As of <tt>sbt</tt> 0.7.0, <tt>make-pom</tt> adds to the POM any Maven-style repositories you have declared. You can filter these by overriding <tt>pomRepositoryFilter</tt>, which by default excludes local repositories. For example, to only include local repositories: </p>
         <pre class="prettyprint">override def pomIncludeRepository(repo: MavenRepository) =
  repo.root.startsWith(&quot;file:&quot;)</pre>
         <p>There is also a <tt>pomPostProcess</tt> method that can be used to manipulate the final XML before it is written. It's signature is: </p>
         <pre class="prettyprint">def pomPostProcess(pom: Node): Node</pre> 
        </div> 
       </div> </td>
     </tr>
     <tr> 
     </tr>
    </tbody>
   </table> 
  </div> 
  <script type="text/javascript" src="http://www.gstatic.com/codesite/ph/5509366563142316864/js/dit_scripts.js"></script>   
 </body>
</html>