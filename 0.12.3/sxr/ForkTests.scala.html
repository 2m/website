<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ForkTests.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2012 Eugene Vigdorchik
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> org.scalatools.testing._
<span class="keyword">import</span> java.net.ServerSocket
<span class="keyword">import</span> java.io._
<span class="keyword">import</span> <a href="Tests.scala.html#11957" title="object sbt.Tests">Tests</a>._
<span class="keyword">import</span> <a href="sbt/ForkMain.java.html#12336" title="object sbt.ForkMain">ForkMain</a>._

<span class="keyword">private</span><span class="delimiter">[</span>sbt<span class="delimiter">]</span> <span class="keyword">object</span> <a title="object sbt.ForkTests" id="11918">ForkTests</a> <span title="ScalaObject" class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(frameworks: Seq[sbt.TestFramework], tests: List[sbt.TestDefinition], config: sbt.Tests.Execution, classpath: Seq[java.io.File], javaHome: Option[java.io.File], javaOpts: Seq[String], log: sbt.Logger)sbt.Task[(sbt.TestResult.Value, Map[String,sbt.TestResult.Value])]" id="366152">apply</a><span class="delimiter">(</span><a title="Seq[sbt.TestFramework]" id="366153">frameworks</a>: <span title="Seq[sbt.TestFramework]">Seq</span><span class="delimiter">[</span>TestFramework<span class="delimiter">]</span>, <a title="List[sbt.TestDefinition]" id="366154">tests</a>: <span title="List[sbt.TestDefinition]">List</span><span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span>, <a title="sbt.Tests.Execution" id="366155">config</a>: <a href="Tests.scala.html#362545" title="sbt.Tests.Execution">Execution</a>, <a title="Seq[java.io.File]" id="366156">classpath</a>: <span title="Seq[java.io.File]">Seq</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Option[java.io.File]" id="366157">javaHome</a>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Seq[String]" id="366158">javaOpts</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="sbt.Logger" id="366159">log</a>: <a href="Logger.scala.html#13102" title="sbt.Logger">Logger</a><span class="delimiter">)</span>: <a href="Action.scala.html#12228" title="sbt.Task[(sbt.TestResult.Value, Map[String,sbt.TestResult.Value])]">Task</a><span class="delimiter">[</span>Output<span class="delimiter">]</span>  = <span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="List[sbt.TestOption]" id="2096838">opts</a> = <a href="#366155" title="sbt.Tests.Execution">config</a>.<a href="Tests.scala.html#362741" title="=&gt; Seq[sbt.TestOption]">options</a>.<span title="=&gt; List[sbt.TestOption]">toList</span>
		<span class="keyword">val</span> <a title="List[sbt.TestReportListener]" id="2096839">listeners</a> = <a href="#2096838" title="List[sbt.TestOption]">opts</a> <span title="(f: sbt.TestOption =&gt; scala.collection.GenTraversableOnce[sbt.TestReportListener])(implicit bf: scala.collection.generic.CanBuildFrom[List[sbt.TestOption],sbt.TestReportListener,List[sbt.TestReportListener]])List[sbt.TestReportListener]">flatMap</span> <a href="#2096859" title="Iterable[sbt.TestReportListener]" class="delimiter">{</a>
			<span class="keyword">case</span> <span title="Iterable[sbt.TestReportListener]">Listeners</span><span class="delimiter">(</span><a title="Iterable[sbt.TestReportListener]" id="2096884">ls</a><span class="delimiter">)</span> =&gt; <a href="#2096884" title="Iterable[sbt.TestReportListener]">ls</a>
			<span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
		<span class="delimiter">}</span>
		<span class="keyword">val</span> <a title="List[sbt.TestsListener]" id="2096840">testListeners</a> = <a href="#2096839" title="List[sbt.TestReportListener]">listeners</a> <span title="(f: sbt.TestReportListener =&gt; scala.collection.GenTraversableOnce[sbt.TestsListener])(implicit bf: scala.collection.generic.CanBuildFrom[List[sbt.TestReportListener],sbt.TestsListener,List[sbt.TestsListener]])List[sbt.TestsListener]">flatMap</span> <a href="#2096933" title="Iterable[sbt.TestsListener]" class="delimiter">{</a>
			<span class="keyword">case</span> <a title="Iterable[sbt.TestsListener]" id="2096934">tl</a>: <a href="TestReportListener.scala.html#12309" title="sbt.TestsListener">TestsListener</a> =&gt; <span title="(x: sbt.TestsListener)Some[sbt.TestsListener]">Some</span><span title="(xo: Option[sbt.TestsListener])Iterable[sbt.TestsListener]" class="delimiter">(</span><a href="#2096934" title="sbt.TestsListener">tl</a><span class="delimiter">)</span>
			<span class="keyword">case</span> <span title="Iterable[Nothing]">_</span> =&gt; <span title="(xo: Option[Nothing])Iterable[Nothing]">None</span>
		<span class="delimiter">}</span>
		<span class="keyword">val</span> <a title="List[String =&gt; Boolean]" id="2096841">filters</a> = <a href="#2096838" title="List[sbt.TestOption]">opts</a> <span title="(f: sbt.TestOption =&gt; scala.collection.GenTraversableOnce[String =&gt; Boolean])(implicit bf: scala.collection.generic.CanBuildFrom[List[sbt.TestOption],String =&gt; Boolean,List[String =&gt; Boolean]])List[String =&gt; Boolean]">flatMap</span> <a href="#2097091" title="Iterable[String =&gt; Boolean]" class="delimiter">{</a>
			<span class="keyword">case</span> <span title="Iterable[String =&gt; Boolean]">Filter</span><span class="delimiter">(</span><a title="String =&gt; Boolean" id="2097110">f</a><span class="delimiter">)</span> =&gt; <span title="(x: String =&gt; Boolean)Some[String =&gt; Boolean]">Some</span><span title="(xo: Option[String =&gt; Boolean])Iterable[String =&gt; Boolean]" class="delimiter">(</span><a href="#2097110" title="String =&gt; Boolean">f</a><span class="delimiter">)</span>
			<span class="keyword">case</span> <span title="Iterable[Nothing]">_</span> =&gt; <span title="(xo: Option[Nothing])Iterable[Nothing]">None</span>
		<span class="delimiter">}</span>
		<span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,List[String]]" id="2096842">argMap</a> = <a href="#366153" title="Seq[sbt.TestFramework]">frameworks</a>.<span title="(f: sbt.TestFramework =&gt; (String, List[String]))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.TestFramework],(String, List[String]),Seq[(String, List[String])]])Seq[(String, List[String])]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,(String, List[String]),Seq[(String, List[String])]]" class="delimiter">{</span>
			<a title="sbt.TestFramework" id="2097261">f</a> =&gt; <a href="#2097261" title="sbt.TestFramework">f</a>.<a href="TestFramework.scala.html#361641" title="(x: String)ArrowAssoc[String]">implClassName</a> <span title="(y: List[String])(String, List[String])">-&gt;</span> <a href="#2096838" title="List[sbt.TestOption]">opts</a>.<span title="(f: sbt.TestOption =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[sbt.TestOption],String,List[String]])List[String]">flatMap</span> <a href="#2097287" title="List[String]" class="delimiter">{</a>
				<span class="keyword">case</span> <span title="List[String]">Argument</span><span class="delimiter">(</span><span title="object None">None</span> | Some<span class="delimiter">(</span><a href="#2097261" title="sbt.TestFramework">`f`</a><span class="delimiter">)</span>, <a title="List[String]" id="2097316">args</a><span class="delimiter">)</span> =&gt; <a href="#2097316" title="List[String]">args</a>
				<span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">_</span> =&gt; <span title="object Nil">Nil</span>
			<span class="delimiter">}</span>
		<span class="delimiter">}</span>.<span title="(implicit ev: &lt;:&lt;[(String, List[String]),(String, List[String])])scala.collection.immutable.Map[String,List[String]]">toMap</span>

		std.<a href="TaskExtra.scala.html#12285" title="object sbt.std.TaskExtra">TaskExtra</a>.<a href="TaskExtra.scala.html#336287" title="(f: =&gt; (sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value]))sbt.Task[(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])]">task</a> <span class="delimiter">{</span>
			<span title="(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#366154" title="List[sbt.TestDefinition]">tests</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
				<span class="keyword">val</span> <a title="java.net.ServerSocket" id="2097393">server</a> = <span title="(x$1: Int)java.net.ServerSocket" class="keyword">new</span> <span title="java.net.ServerSocket">ServerSocket</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
				<span class="keyword">object</span> <a title="object Acceptor" id="2097394">Acceptor</a> <span title="ScalaObject" class="keyword">extends</span> <span title="java.lang.Runnable">Runnable</span> <span class="delimiter">{</span>
					<span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,sbt.TestResult.Value]" id="2097507">resultsAcc</a> = mutable.<span title="object scala.collection.mutable.Map">Map</span>.<span title="[A, B]=&gt; scala.collection.mutable.Map[A,B]">empty</span><span title="scala.collection.mutable.Map[String,sbt.TestResult.Value]" class="delimiter">[</span><span title="String">String</span>, TestResult.<span title="sbt.TestResult.Value">Value</span><span class="delimiter">]</span>
					<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(sbt.TestResult.Value, scala.collection.immutable.Map[String,sbt.TestResult.Value])" id="2097510">result</a> = <span title="(_1: sbt.TestResult.Value, _2: scala.collection.immutable.Map[String,sbt.TestResult.Value])(sbt.TestResult.Value, scala.collection.immutable.Map[String,sbt.TestResult.Value])" class="delimiter">(</span><a href="Tests.scala.html#362555" title="(results: Iterable[sbt.TestResult.Value])sbt.TestResult.Value">overall</a><span class="delimiter">(</span><a href="#2097507" title="=&gt; scala.collection.mutable.Map[String,sbt.TestResult.Value]">resultsAcc</a>.<span title="=&gt; Iterable[sbt.TestResult.Value]">values</span><span class="delimiter">)</span>, <a href="#2097507" title="=&gt; scala.collection.mutable.Map[String,sbt.TestResult.Value]">resultsAcc</a>.<span title="(implicit ev: &lt;:&lt;[(String, sbt.TestResult.Value),(String, sbt.TestResult.Value)])scala.collection.immutable.Map[String,sbt.TestResult.Value]">toMap</span><span class="delimiter">)</span>
					<span class="keyword">def</span> <a title="()Unit" id="2097511">run</a>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
						<span class="keyword">val</span> <a title="java.net.Socket" id="2097534">socket</a> =
							<span class="keyword">try</span> <span class="delimiter">{</span>
								<a href="#2097393" title="java.net.ServerSocket">server</a>.<span title="()java.net.Socket">accept</span><span class="delimiter">(</span><span class="delimiter">)</span>
							<span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
								<span class="keyword">case</span> <span title="Nothing">_</span>: java.net.<span title="java.net.SocketException">SocketException</span> =&gt; <span title="Nothing" class="keyword">return</span>
							<span class="delimiter">}</span>
						<span class="keyword">val</span> <a title="java.io.ObjectOutputStream" id="2097535">os</a> = <span title="java.io.ObjectOutputStream" class="keyword">new</span> <span title="java.io.ObjectOutputStream">ObjectOutputStream</span><span class="delimiter">(</span><a href="#2097534" title="java.net.Socket">socket</a>.<span title="()java.io.OutputStream">getOutputStream</span><span class="delimiter">)</span>
						<span class="keyword">val</span> <a title="java.io.ObjectInputStream" id="2097536">is</a> = <span title="java.io.ObjectInputStream" class="keyword">new</span> <span title="java.io.ObjectInputStream">ObjectInputStream</span><span class="delimiter">(</span><a href="#2097534" title="java.net.Socket">socket</a>.<span title="()java.io.InputStream">getInputStream</span><span class="delimiter">)</span>

						<span class="keyword">try</span> <span class="delimiter">{</span>
							<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="(x$1: Boolean)Unit">writeBoolean</span><span class="delimiter">(</span><a href="#366159" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53763" title="=&gt; Boolean">ansiCodesSupported</a><span class="delimiter">)</span>
							
							<span class="keyword">val</span> <a title="Array[sbt.ForkMain.ForkTestDefinition]" id="2097642">testsFiltered</a> = <a href="#366154" title="List[sbt.TestDefinition]">tests</a>.<span title="(p: sbt.TestDefinition =&gt; Boolean)List[sbt.TestDefinition]">filter</span><span class="delimiter">(</span><a title="sbt.TestDefinition" id="2097646">test</a> =&gt; <a href="#2096841" title="List[String =&gt; Boolean]">filters</a>.<span title="(p: (String =&gt; Boolean) =&gt; Boolean)Boolean">forall</span><span class="delimiter">(</span><a href="#2097653" title="(v1: String)Boolean">_</a><span class="delimiter">(</span><a href="#2097646" title="sbt.TestDefinition">test</a>.<a href="TestFramework.scala.html#362045" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: sbt.TestDefinition =&gt; sbt.ForkMain.ForkTestDefinition)(implicit bf: scala.collection.generic.CanBuildFrom[List[sbt.TestDefinition],sbt.ForkMain.ForkTestDefinition,List[sbt.ForkMain.ForkTestDefinition]])List[sbt.ForkMain.ForkTestDefinition]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,sbt.ForkMain.ForkTestDefinition,List[sbt.ForkMain.ForkTestDefinition]]" class="delimiter">{</span>
								<a title="sbt.TestDefinition" id="2097678">t</a> =&gt; <span title="sbt.ForkMain.ForkTestDefinition" class="keyword">new</span> <a href="sbt/ForkMain.java.html#366169" title="sbt.ForkMain.ForkTestDefinition">ForkTestDefinition</a><span class="delimiter">(</span><a href="#2097678" title="sbt.TestDefinition">t</a>.<a href="TestFramework.scala.html#362045" title="=&gt; String">name</a>, <a href="#2097678" title="sbt.TestDefinition">t</a>.<a href="TestFramework.scala.html#362047" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a><span class="delimiter">)</span>
							<span class="delimiter">}</span>.<span title="(implicit evidence$1: ClassManifest[sbt.ForkMain.ForkTestDefinition])Array[sbt.ForkMain.ForkTestDefinition]">toArray</span>
							<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#2097642" title="Array[sbt.ForkMain.ForkTestDefinition]">testsFiltered</a><span class="delimiter">)</span>

							<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="(x$1: Int)Unit">writeInt</span><span class="delimiter">(</span><a href="#366153" title="Seq[sbt.TestFramework]">frameworks</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
							<span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="2097771">clazz</a>, <a title="List[String]" id="2097772">args</a><span class="delimiter">)</span> &lt;- <a href="#2096842" title="(f: ((String, List[String])) =&gt; Unit)Unit">argMap</a><span class="delimiter">)</span> <span class="delimiter">{</span>
								<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#2097771" title="String">clazz</a><span class="delimiter">)</span>
								<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="#2097772" title="List[String]">args</a>.<span title="(implicit evidence$1: ClassManifest[String])Array[String]">toArray</span><span class="delimiter">)</span>
							<span class="delimiter">}</span>
							<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>

							<span class="delimiter">(</span><span title="sbt.React" class="keyword">new</span> <a href="#11920" title="sbt.React">React</a><span class="delimiter">(</span><a href="#2097536" title="java.io.ObjectInputStream">is</a>, <a href="#2097535" title="java.io.ObjectOutputStream">os</a>, <a href="#366159" title="sbt.Logger">log</a>, <a href="#2096839" title="List[sbt.TestReportListener]">listeners</a>, <a href="#2097507" title="=&gt; scala.collection.mutable.Map[String,sbt.TestResult.Value]">resultsAcc</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
						<span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
							<a href="#2097536" title="java.io.ObjectInputStream">is</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>;	<a href="#2097535" title="java.io.ObjectOutputStream">os</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>; <a href="#2097534" title="java.net.Socket">socket</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
						<span class="delimiter">}</span>
					<span class="delimiter">}</span>
				<span class="delimiter">}</span>

				<span class="keyword">try</span> <span class="delimiter">{</span>
					<a href="#2096840" title="List[sbt.TestsListener]">testListeners</a>.<span title="(f: sbt.TestsListener =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#2097839" title="sbt.TestsListener">_</a>.<a href="TestReportListener.scala.html#363787" title="()Unit">doInit</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
					<span title="(x$1: java.lang.Runnable)java.lang.Thread" class="keyword">new</span> <span title="java.lang.Thread">Thread</span><span class="delimiter">(</span><a href="#2097394" title="object Acceptor">Acceptor</a><span class="delimiter">)</span>.<span title="()Unit">start</span><span class="delimiter">(</span><span class="delimiter">)</span>

					<span class="keyword">val</span> <a title="Seq[java.io.File]" id="2097816">fullCp</a> = <a href="#366156" title="Seq[java.io.File]">classpath</a> <a href="#2097905" title="(that: Traversable[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[java.io.File],java.io.File,Seq[java.io.File]])Seq[java.io.File]">++:</a> <span title="(elems: java.io.File*)Seq[java.io.File]">Seq</span><span class="delimiter">(</span><a href="IO.scala.html#12903" title="object sbt.IO">IO</a>.<a href="IO.scala.html#31731" title="[T](implicit mf: scala.reflect.Manifest[T])java.io.File">classLocationFile</a><span title="(implicit mf: scala.reflect.Manifest[sbt.ForkMain])java.io.File" class="delimiter">[</span><a href="sbt/ForkMain.java.html#12338" title="sbt.ForkMain">ForkMain</a><span class="delimiter">]</span>, <a href="IO.scala.html#12903" title="object sbt.IO">IO</a>.<a href="IO.scala.html#31731" title="[T](implicit mf: scala.reflect.Manifest[T])java.io.File">classLocationFile</a><span title="(implicit mf: scala.reflect.Manifest[org.scalatools.testing.Framework])java.io.File" class="delimiter">[</span><span title="org.scalatools.testing.Framework">Framework</span><span class="delimiter">]</span><span class="delimiter">)</span>
					<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="2097817">options</a> = <a href="#366158" title="Seq[String]">javaOpts</a> <a href="#2098039" title="(that: Traversable[java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[java.lang.String],java.lang.String,Seq[java.lang.String]])Seq[java.lang.String]">++:</a> <span title="(elems: java.lang.String*)Seq[java.lang.String]">Seq</span><span class="delimiter">(</span><span title="java.lang.String(&quot;-classpath&quot;)" class="string">&quot;-classpath&quot;</span>, <a href="#2097816" title="Seq[java.io.File]">fullCp</a> <span title="(sep: String)String">mkString</span> <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>, classOf<span title="java.lang.Class[sbt.ForkMain](classOf[sbt.ForkMain])" class="delimiter">[</span>ForkMain<span class="delimiter">]</span>.<span title="()java.lang.String">getCanonicalName</span>, <a href="#2097393" title="java.net.ServerSocket">server</a>.<span title="()Int">getLocalPort</span>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span>
					<span class="keyword">val</span> <a title="Int" id="2097818">ec</a> = <a href="Fork.scala.html#12100" title="object sbt.Fork">Fork</a>.<a href="Fork.scala.html#2098167" title="(javaHome: Option[java.io.File], options: Seq[String], outputStrategy: sbt.OutputStrategy)Int">java</a><span class="delimiter">(</span><a href="#366157" title="Option[java.io.File]">javaHome</a>, <a href="#2097817" title="Seq[java.lang.String]">options</a>, <a href="Fork.scala.html#12088" title="object sbt.StdoutOutput">StdoutOutput</a><span class="delimiter">)</span>
					<span class="keyword">val</span> <a title="(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])" id="2097819">result</a> =
						<span title="(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])" class="keyword">if</span> <span class="delimiter">(</span><a href="#2097818" title="Int">ec</a> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
							<span title="(_1: sbt.TestResult.Value, _2: scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])" class="delimiter">(</span><a href="TestFramework.scala.html#12295" title="object sbt.TestResult">TestResult</a>.<a href="TestFramework.scala.html#362574" title="=&gt; sbt.TestResult.Value">Error</a>, <span title="(elems: (java.lang.String, sbt.TestResult.Value)*)scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value]">Map</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Running java with options &quot;)" class="string">&quot;Running java with options &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2097817" title="Seq[java.lang.String]">options</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; failed with exit code &quot;)" class="string">&quot; failed with exit code &quot;</span> <span title="(x: java.lang.String)ArrowAssoc[java.lang.String]">+</span> <a href="#2097818" title="Int">ec</a> <span title="(y: sbt.TestResult.Value)(java.lang.String, sbt.TestResult.Value)">-&gt;</span> <a href="TestFramework.scala.html#12295" title="object sbt.TestResult">TestResult</a>.<a href="TestFramework.scala.html#362574" title="=&gt; sbt.TestResult.Value">Error</a><span class="delimiter">)</span><span class="delimiter">)</span>
						<span class="keyword">else</span>
							<a href="#2097394" title="object Acceptor">Acceptor</a>.<a href="#2097509" title="=&gt; (sbt.TestResult.Value, scala.collection.immutable.Map[String,sbt.TestResult.Value])">result</a>
					<a href="#2096840" title="List[sbt.TestsListener]">testListeners</a>.<span title="(f: sbt.TestsListener =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#2098255" title="sbt.TestsListener">_</a>.<a href="TestReportListener.scala.html#363788" title="(finalResult: sbt.TestResult.Value)Unit">doComplete</a><span class="delimiter">(</span><a href="#2097819" title="(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])">result</a>.<span title="=&gt; sbt.TestResult.Value">_1</span><span class="delimiter">)</span><span class="delimiter">)</span>
					<a href="#2097819" title="(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])">result</a>
				<span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
					<a href="#2097393" title="java.net.ServerSocket">server</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
				<span class="delimiter">}</span>
			<span class="delimiter">}</span> <span class="keyword">else</span>
				<span title="(_1: sbt.TestResult.Value, _2: scala.collection.immutable.Map[String,sbt.TestResult.Value])(sbt.TestResult.Value, scala.collection.immutable.Map[String,sbt.TestResult.Value])" class="delimiter">(</span><a href="TestFramework.scala.html#12295" title="object sbt.TestResult">TestResult</a>.<a href="TestFramework.scala.html#362570" title="=&gt; sbt.TestResult.Value">Passed</a>, <span title="=&gt; scala.collection.immutable.Map.type">Map</span>.<span title="[A, B]=&gt; scala.collection.immutable.Map[A,B]">empty</span><span title="scala.collection.immutable.Map[String,sbt.TestResult.Value]" class="delimiter">[</span><span title="String">String</span>, TestResult.<span title="sbt.TestResult.Value">Value</span><span class="delimiter">]</span><span class="delimiter">)</span>
		<span class="delimiter">}</span> <a href="Action.scala.html#336429" title="(tags: (sbt.ConcurrentRestrictions.Tag, Int)*)sbt.Task[(sbt.TestResult.Value, scala.collection.immutable.Map[java.lang.String,sbt.TestResult.Value])]">tagw</a> <span class="delimiter">(</span><a href="#366155" title="sbt.Tests.Execution">config</a>.<a href="Tests.scala.html#362745" title="=&gt; Seq[(sbt.ConcurrentRestrictions.Tag, Int)]">tags</a>: _*<span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class React extends java.lang.Object with ScalaObject" id="11920">React</a><a href="#11920" title="ScalaObject" class="delimiter">(</a><a title="java.io.ObjectInputStream" id="2097802">is</a>: <span title="java.io.ObjectInputStream">ObjectInputStream</span>, <a title="java.io.ObjectOutputStream" id="2097803">os</a>: <span title="java.io.ObjectOutputStream">ObjectOutputStream</span>, <a title="sbt.Logger" id="2097804">log</a>: <a href="Logger.scala.html#13102" title="sbt.Logger">Logger</a>, <a title="Seq[sbt.TestReportListener]" id="2097805">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span><span class="delimiter">[</span>TestReportListener<span class="delimiter">]</span>, <a title="scala.collection.mutable.Map[String,sbt.TestResult.Value]" id="2097806">results</a>: mutable.<span title="scala.collection.mutable.Map[String,sbt.TestResult.Value]">Map</span><span class="delimiter">[</span>String, TestResult.Value<span class="delimiter">]</span><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">import</span> <a href="sbt/ForkTags.java.html#12340" title="object sbt.ForkTags">ForkTags</a>._
	@annotation.tailrec <span class="keyword">def</span> <a title="()Unit" id="2097801">react</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#2097802" title="java.io.ObjectInputStream">is</a>.<span title="()java.lang.Object">readObject</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
		<span class="keyword">case</span> <a href="sbt/ForkTags.java.html#2097812" title="Unit">`Done`</a> =&gt; <a href="#2097803" title="java.io.ObjectOutputStream">os</a>.<span title="(x$1: Any)Unit">writeObject</span><span class="delimiter">(</span><a href="sbt/ForkTags.java.html#2097812" title="sbt.ForkTags">Done</a><span class="delimiter">)</span>; <a href="#2097803" title="java.io.ObjectOutputStream">os</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <a href="#2098281" title="Unit">Array</a><span class="delimiter">(</span><a href="sbt/ForkTags.java.html#2097808" title="sbt.ForkTags">`Error`</a>, <a title="String" id="2098289">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#2097804" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53762" title="(message: =&gt; String)Unit">error</a><span class="delimiter">(</span><a href="#2098289" title="String">s</a><span class="delimiter">)</span>; <a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <a href="#2098294" title="Unit">Array</a><span class="delimiter">(</span><a href="sbt/ForkTags.java.html#2097809" title="sbt.ForkTags">`Warn`</a>, <a title="String" id="2098302">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#2097804" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53761" title="(message: =&gt; String)Unit">warn</a><span class="delimiter">(</span><a href="#2098302" title="String">s</a><span class="delimiter">)</span>; <a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <a href="#2098307" title="Unit">Array</a><span class="delimiter">(</span><a href="sbt/ForkTags.java.html#2097810" title="sbt.ForkTags">`Info`</a>, <a title="String" id="2098315">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#2097804" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53760" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><a href="#2098315" title="String">s</a><span class="delimiter">)</span>; <a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <a href="#2098320" title="Unit">Array</a><span class="delimiter">(</span><a href="sbt/ForkTags.java.html#2097811" title="sbt.ForkTags">`Debug`</a>, <a title="String" id="2098328">s</a>: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#2097804" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53759" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><a href="#2098328" title="String">s</a><span class="delimiter">)</span>; <a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <a title="Unit" id="2098333">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#2097804" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53764" title="(t: =&gt; Throwable)Unit">trace</a><span class="delimiter">(</span><a href="#2098333" title="Throwable">t</a><span class="delimiter">)</span>; <a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="keyword">case</span> <a href="#2098338" title="Unit">Array</a><span class="delimiter">(</span><a title="String" id="2098346">group</a>: <span title="String">String</span>, <a title="Array[org.scalatools.testing.Event]" id="2098347">tEvents</a>: <span title="Array[org.scalatools.testing.Event]">Array</span><span class="delimiter">[</span>Event<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
			<a href="#2097805" title="Seq[sbt.TestReportListener]">listeners</a>.<span title="(f: sbt.TestReportListener =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#2098370" title="sbt.TestReportListener">_</a> <a href="TestReportListener.scala.html#362322" title="(name: String)Unit">startGroup</a> <a href="#2098346" title="String">group</a><span class="delimiter">)</span>
			<span class="keyword">val</span> <a title="sbt.TestEvent" id="2098352">event</a> = <a href="TestReportListener.scala.html#2098375" title="(events: Seq[org.scalatools.testing.Event])sbt.TestEvent">TestEvent</a><span class="delimiter">(</span><a href="#2098347" title="(xs: Array[org.scalatools.testing.Event])scala.collection.mutable.WrappedArray[org.scalatools.testing.Event]">tEvents</a><span class="delimiter">)</span>
			<a href="#2097805" title="Seq[sbt.TestReportListener]">listeners</a>.<span title="(f: sbt.TestReportListener =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#2098400" title="sbt.TestReportListener">_</a> <a href="TestReportListener.scala.html#362323" title="(event: sbt.TestEvent)Unit">testEvent</a> <a href="#2098352" title="sbt.TestEvent">event</a><span class="delimiter">)</span>
			<span class="keyword">val</span> <a title="sbt.TestResult.Value" id="2098353">result</a> = <a href="#2098352" title="sbt.TestEvent">event</a>.<a href="TestReportListener.scala.html#2098389" title="=&gt; Option[sbt.TestResult.Value]">result</a> <span title="(default: =&gt; sbt.TestResult.Value)sbt.TestResult.Value">getOrElse</span> <a href="TestFramework.scala.html#12295" title="object sbt.TestResult">TestResult</a>.<a href="TestFramework.scala.html#362570" title="=&gt; sbt.TestResult.Value">Passed</a>
			<a href="#2097806" title="scala.collection.mutable.Map[String,sbt.TestResult.Value]">results</a> <span title="(kv: (String, sbt.TestResult.Value))React.this.results.type">+=</span> <a href="#2098346" title="(x: String)ArrowAssoc[String]">group</a> <span title="(y: sbt.TestResult.Value)(String, sbt.TestResult.Value)">-&gt;</span> <a href="#2098353" title="sbt.TestResult.Value">result</a>
			<a href="#2097805" title="Seq[sbt.TestReportListener]">listeners</a>.<span title="(f: sbt.TestReportListener =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#2098444" title="sbt.TestReportListener">_</a> <a href="TestReportListener.scala.html#362325" title="(name: String, result: sbt.TestResult.Value)Unit">endGroup</a> <span class="delimiter">(</span><a href="#2098346" title="String">group</a>, <a href="#2098353" title="sbt.TestResult.Value">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<a href="#2097801" title="()Unit">react</a><span class="delimiter">(</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>