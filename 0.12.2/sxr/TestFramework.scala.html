<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>TestFramework.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009  Steven Blundy, Mark Harrah, Josh Cough
 */</span>
<span class="keyword">package</span> sbt

	<span class="keyword">import</span> java.io.File
	<span class="keyword">import</span> java.net.URLClassLoader
	<span class="keyword">import</span> org.scalatools.testing.<span class="delimiter">{</span>AnnotatedFingerprint, Fingerprint, SubclassFingerprint, TestFingerprint<span class="delimiter">}</span>
	<span class="keyword">import</span> org.scalatools.testing.<span class="delimiter">{</span>Event, EventHandler, Framework, Runner, Runner2, Logger=&gt;TLogger<span class="delimiter">}</span>
	<span class="keyword">import</span> classpath.<span class="delimiter">{</span>ClasspathUtilities, DualLoader, FilteredLoader<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object sbt.TestResult" id="12272">TestResult</a> <span title="ScalaObject" class="keyword">extends</span> <span title="Enumeration">Enumeration</span>
<span class="delimiter">{</span>
	<span class="keyword">val</span> <a title="sbt.TestResult.Value" id="362198">Passed</a>, <a title="sbt.TestResult.Value" id="362200">Failed</a>, <a title="sbt.TestResult.Value" id="362202">Error</a> = <span title="=&gt; sbt.TestResult.Value">Value</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object sbt.TestFrameworks" id="12274">TestFrameworks</a>
<span title="ScalaObject" class="delimiter">{</span>
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="361337">ScalaCheck</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#361267" title="sbt.TestFramework">TestFramework</a><span class="delimiter">(</span><span title="java.lang.String(&quot;org.scalacheck.ScalaCheckFramework&quot;)" class="string">&quot;org.scalacheck.ScalaCheckFramework&quot;</span><span class="delimiter">)</span>
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="361339">ScalaTest</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#361267" title="sbt.TestFramework">TestFramework</a><span class="delimiter">(</span><span title="java.lang.String(&quot;org.scalatest.tools.ScalaTestFramework&quot;)" class="string">&quot;org.scalatest.tools.ScalaTestFramework&quot;</span><span class="delimiter">)</span>
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="361341">Specs</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#361267" title="sbt.TestFramework">TestFramework</a><span class="delimiter">(</span><span title="java.lang.String(&quot;org.specs.runner.SpecsFramework&quot;)" class="string">&quot;org.specs.runner.SpecsFramework&quot;</span><span class="delimiter">)</span>
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="361343">Specs2</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#361267" title="sbt.TestFramework">TestFramework</a><span class="delimiter">(</span><span title="java.lang.String(&quot;org.specs2.runner.SpecsFramework&quot;)" class="string">&quot;org.specs2.runner.SpecsFramework&quot;</span><span class="delimiter">)</span>
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="361345">JUnit</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#361267" title="sbt.TestFramework">TestFramework</a><span class="delimiter">(</span><span title="java.lang.String(&quot;com.novocode.junit.JUnitFramework&quot;)" class="string">&quot;com.novocode.junit.JUnitFramework&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class TestFramework extends java.lang.Object with ScalaObject with Product with Serializable" id="361267">TestFramework</a><a href="#361267" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="2133715">implClassName</a>: <span title="String">String</span><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(loader: java.lang.ClassLoader, log: sbt.Logger)Option[org.scalatools.testing.Framework]" id="361272">create</a><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="361534">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.Logger" id="361535">log</a>: <a href="Logger.scala.html#13079" title="sbt.Logger">Logger</a><span class="delimiter">)</span>: <span title="Option[org.scalatools.testing.Framework]">Option</span><span class="delimiter">[</span>Framework<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span class="keyword">try</span> <span class="delimiter">{</span> <span title="(x: org.scalatools.testing.Framework)Some[org.scalatools.testing.Framework]">Some</span><span class="delimiter">(</span><span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String, x$2: Boolean, x$3: java.lang.ClassLoader)java.lang.Class[_]">forName</span><span class="delimiter">(</span><a href="#2133715" title="=&gt; String">implClassName</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#361534" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span>.<span title="()?0">newInstance</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="org.scalatools.testing.Framework" class="delimiter">[</span><span title="org.scalatools.testing.Framework">Framework</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">}</span>
		<span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="None.type" id="2131725">e</a>: <span title="java.lang.ClassNotFoundException">ClassNotFoundException</span> =&gt; <a href="#361535" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53736" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Framework implementation \'&quot;)" class="string">&quot;Framework implementation '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2133715" title="=&gt; String">implClassName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\' not present.&quot;)" class="string">&quot;' not present.&quot;</span><span class="delimiter">)</span>; <span title="object None">None</span> <span class="delimiter">}</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class TestDefinition extends java.lang.Object with ScalaObject" id="12279">TestDefinition</a><a href="#12279" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="2109399">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="org.scalatools.testing.Fingerprint" id="2109400">fingerprint</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="361678">toString</a> = <span title="java.lang.String(&quot;Test &quot;)" class="string">&quot;Test &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2109399" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2133717" title="object sbt.TestFramework">TestFramework</a>.<a href="#361258" title="(f: org.scalatools.testing.Fingerprint)String">toString</a><span class="delimiter">(</span><a href="#2109400" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a><span class="delimiter">)</span>
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: Any)Boolean" id="361679">equals</a><span class="delimiter">(</span><a title="Any" id="2131780">t</a>: <span title="Any">Any</span><span class="delimiter">)</span> =
		<a href="#2131780" title="Any">t</a> <span title="Boolean" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <a title="Boolean" id="2131783">r</a>: <a href="#12279" title="sbt.TestDefinition">TestDefinition</a> =&gt; <a href="#2109399" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#2131783" title="sbt.TestDefinition">r</a>.<a href="#2109399" title="=&gt; String">name</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#2133717" title="object sbt.TestFramework">TestFramework</a>.<a href="#361257" title="(a: org.scalatools.testing.Fingerprint, b: org.scalatools.testing.Fingerprint)Boolean">matches</a><span class="delimiter">(</span><a href="#2109400" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>, <a href="#2131783" title="sbt.TestDefinition">r</a>.<a href="#2109400" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a><span class="delimiter">)</span>
			<span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
		<span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">final</span> <span class="keyword">class</span> <a title="class TestRunner extends java.lang.Object with ScalaObject" id="12280">TestRunner</a><a href="#12280" title="ScalaObject" class="delimiter">(</a><a title="org.scalatools.testing.Framework" id="2131844">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span>, <a title="java.lang.ClassLoader" id="2131845">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Seq[sbt.TestReportListener]" id="2131846">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span><span class="delimiter">[</span>TestReportListener<span class="delimiter">]</span>, <a title="sbt.Logger" id="2131847">log</a>: <a href="Logger.scala.html#13079" title="sbt.Logger">Logger</a><span class="delimiter">)</span>
<span class="delimiter">{</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(testDefinition: sbt.TestDefinition, handler: org.scalatools.testing.EventHandler, args: Array[String])Unit" id="2131835">run</a><span class="delimiter">(</span><a title="sbt.TestDefinition" id="2131848">testDefinition</a>: <a href="#12279" title="sbt.TestDefinition">TestDefinition</a>, <a title="org.scalatools.testing.EventHandler" id="2131849">handler</a>: <span title="org.scalatools.testing.EventHandler">EventHandler</span>, <a title="Array[String]" id="2131850">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="Seq[sbt.ContentLogger]" id="2131854">loggers</a> = <a href="#2131846" title="Seq[sbt.TestReportListener]">listeners</a>.<span title="(f: sbt.TestReportListener =&gt; scala.collection.GenTraversableOnce[sbt.ContentLogger])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.TestReportListener],sbt.ContentLogger,Seq[sbt.ContentLogger]])Seq[sbt.ContentLogger]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,sbt.ContentLogger,Seq[sbt.ContentLogger]]" class="delimiter">(</span><a href="#2131872" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#361954" title="(test: sbt.TestDefinition)Option[sbt.ContentLogger]">contentLogger</a><span title="(xo: Option[sbt.ContentLogger])Iterable[sbt.ContentLogger]" class="delimiter">(</span><a href="#2131848" title="sbt.TestDefinition">testDefinition</a><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="org.scalatools.testing.Runner" id="2131855">delegate</a> = <a href="#2131844" title="org.scalatools.testing.Framework">framework</a>.<span title="(x$1: java.lang.ClassLoader, x$2: Array[org.scalatools.testing.Logger])org.scalatools.testing.Runner">testRunner</span><span class="delimiter">(</span><a href="#2131845" title="java.lang.ClassLoader">loader</a>, <a href="#2131854" title="Seq[sbt.ContentLogger]">loggers</a>.<span title="(f: sbt.ContentLogger =&gt; org.scalatools.testing.Logger)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.ContentLogger],org.scalatools.testing.Logger,Seq[org.scalatools.testing.Logger]])Seq[org.scalatools.testing.Logger]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.scalatools.testing.Logger,Seq[org.scalatools.testing.Logger]]" class="delimiter">(</span><a href="#2131970" title="sbt.ContentLogger">_</a>.<a href="TestReportListener.scala.html#2131909" title="=&gt; org.scalatools.testing.Logger">log</a><span class="delimiter">)</span>.<span title="(implicit evidence$1: ClassManifest[org.scalatools.testing.Logger])Array[org.scalatools.testing.Logger]">toArray</span><span class="delimiter">)</span>
		<span class="keyword">try</span> <span class="delimiter">{</span> <a href="#2131836" title="(delegate: org.scalatools.testing.Runner, testDefinition: sbt.TestDefinition, handler: org.scalatools.testing.EventHandler, args: Array[String])Unit">delegateRun</a><span class="delimiter">(</span><a href="#2131855" title="org.scalatools.testing.Runner">delegate</a>, <a href="#2131848" title="sbt.TestDefinition">testDefinition</a>, <a href="#2131849" title="org.scalatools.testing.EventHandler">handler</a>, <a href="#2131850" title="Array[String]">args</a><span class="delimiter">)</span> <span class="delimiter">}</span>
		<span class="keyword">finally</span> <span class="delimiter">{</span> <a href="#2131854" title="Seq[sbt.ContentLogger]">loggers</a>.<span title="(f: sbt.ContentLogger =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span> <a href="#2132033" title="sbt.ContentLogger">_</a>.<a href="TestReportListener.scala.html#2131911" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">)</span> <span class="delimiter">}</span>
	<span class="delimiter">}</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(delegate: org.scalatools.testing.Runner, testDefinition: sbt.TestDefinition, handler: org.scalatools.testing.EventHandler, args: Array[String])Unit" id="2131836">delegateRun</a><span class="delimiter">(</span><a title="org.scalatools.testing.Runner" id="2132012">delegate</a>: <span title="org.scalatools.testing.Runner">Runner</span>, <a title="sbt.TestDefinition" id="2132013">testDefinition</a>: <a href="#12279" title="sbt.TestDefinition">TestDefinition</a>, <a title="org.scalatools.testing.EventHandler" id="2132014">handler</a>: <span title="org.scalatools.testing.EventHandler">EventHandler</span>, <a title="Array[String]" id="2132015">args</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
		<span title="(_1: org.scalatools.testing.Fingerprint, _2: org.scalatools.testing.Runner)(org.scalatools.testing.Fingerprint, org.scalatools.testing.Runner)" class="delimiter">(</span><a href="#2132013" title="sbt.TestDefinition">testDefinition</a>.<a href="#2109400" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>, <a href="#2132012" title="org.scalatools.testing.Runner">delegate</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="org.scalatools.testing.TestFingerprint" id="2132043">simple</a>: <span title="org.scalatools.testing.TestFingerprint">TestFingerprint</span>, _<span class="delimiter">)</span> =&gt; <a href="#2132012" title="org.scalatools.testing.Runner">delegate</a>.<span title="(x$1: java.lang.String, x$2: org.scalatools.testing.TestFingerprint, x$3: org.scalatools.testing.EventHandler, x$4: Array[java.lang.String])Unit">run</span><span class="delimiter">(</span><a href="#2132013" title="sbt.TestDefinition">testDefinition</a>.<a href="#2109399" title="=&gt; String">name</a>, <a href="#2132043" title="org.scalatools.testing.TestFingerprint">simple</a>, <a href="#2132014" title="org.scalatools.testing.EventHandler">handler</a>, <a href="#2132015" title="Array[String]">args</a><span class="delimiter">)</span>
			<span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="org.scalatools.testing.Fingerprint" id="2132046">basic</a>, <a title="org.scalatools.testing.Runner2" id="2132047">runner2</a>: <span title="org.scalatools.testing.Runner2">Runner2</span><span class="delimiter">)</span> =&gt; <a href="#2132047" title="org.scalatools.testing.Runner2">runner2</a>.<span title="(x$1: java.lang.String, x$2: org.scalatools.testing.Fingerprint, x$3: org.scalatools.testing.EventHandler, x$4: Array[java.lang.String])Unit">run</span><span class="delimiter">(</span><a href="#2132013" title="sbt.TestDefinition">testDefinition</a>.<a href="#2109399" title="=&gt; String">name</a>, <a href="#2132046" title="org.scalatools.testing.Fingerprint">basic</a>, <a href="#2132014" title="org.scalatools.testing.EventHandler">handler</a>, <a href="#2132015" title="Array[String]">args</a><span class="delimiter">)</span>
			<span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Framework \'&quot;)" class="string">&quot;Framework '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2131844" title="org.scalatools.testing.Framework">framework</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\' does not support test \'&quot;)" class="string">&quot;' does not support test '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132013" title="sbt.TestDefinition">testDefinition</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\'&quot;)" class="string">&quot;'&quot;</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>

	<span class="keyword">final</span> <span class="keyword">def</span> <a title="(testDefinition: sbt.TestDefinition, args: Seq[String])sbt.TestResult.Value" id="2131837">run</a><span class="delimiter">(</span><a title="sbt.TestDefinition" id="2132063">testDefinition</a>: <a href="#12279" title="sbt.TestDefinition">TestDefinition</a>, <a title="Seq[String]" id="2132064">args</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: TestResult.<span title="sbt.TestResult.Value">Value</span> =
	<span class="delimiter">{</span>
		<a href="#2131847" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53736" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Running &quot;)" class="string">&quot;Running &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132063" title="sbt.TestDefinition">testDefinition</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with arguments &quot;)" class="string">&quot; with arguments &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132064" title="Seq[String]">args</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="String" id="2132066">name</a> = <a href="#2132063" title="sbt.TestDefinition">testDefinition</a>.<a href="#2109399" title="=&gt; String">name</a>
		<span class="keyword">def</span> <a title="()Option[sbt.TestResult.Value]" id="2132067">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> =
		<span class="delimiter">{</span>
			<span class="comment">// here we get the results! here is where we'd pass in the event listener</span>
			<span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]" id="2132074">results</a> = <span title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]" class="keyword">new</span> scala.collection.mutable.<span title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]">ListBuffer</span><span class="delimiter">[</span>Event<span class="delimiter">]</span>
			<span class="keyword">val</span> <a title="handler extends java.lang.Object with org.scalatools.testing.EventHandler" id="2132075">handler</a> = <a href="#2132077" title="java.lang.Object with org.scalatools.testing.EventHandler" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.scalatools.testing.EventHandler" id="2132077">EventHandler</a> <span class="delimiter">{</span> <span class="keyword">def</span> <a title="(e: org.scalatools.testing.Event)Unit" id="2132079">handle</a><span class="delimiter">(</span><a title="org.scalatools.testing.Event" id="2132080">e</a>:<span title="org.scalatools.testing.Event">Event</span><span class="delimiter">)</span><span class="delimiter">{</span> <a href="#2132074" title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]">results</a> <span title="(x: org.scalatools.testing.Event)results.type">+=</span> <a href="#2132080" title="org.scalatools.testing.Event">e</a> <span class="delimiter">}</span> <span class="delimiter">}</span>
			<a href="#2131835" title="(testDefinition: sbt.TestDefinition, handler: org.scalatools.testing.EventHandler, args: Array[String])Unit">run</a><span class="delimiter">(</span><a href="#2132063" title="sbt.TestDefinition">testDefinition</a>, <a href="#2132075" title="handler extends java.lang.Object with org.scalatools.testing.EventHandler">handler</a>, <a href="#2132064" title="Seq[String]">args</a>.<span title="(implicit evidence$1: ClassManifest[String])Array[String]">toArray</span><span class="delimiter">)</span>
			<span class="keyword">val</span> <a title="sbt.TestEvent" id="2132076">event</a> = <a href="TestReportListener.scala.html#2097964" title="(events: Seq[org.scalatools.testing.Event])sbt.TestEvent">TestEvent</a><span class="delimiter">(</span><a href="#2132074" title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]">results</a><span class="delimiter">)</span>
			<a href="#2131838" title="(call: sbt.TestReportListener =&gt; Unit)Unit">safeListenersCall</a><span class="delimiter">(</span><a href="#2132123" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#361951" title="(event: sbt.TestEvent)Unit">testEvent</a><span class="delimiter">(</span> <a href="#2132076" title="sbt.TestEvent">event</a> <span class="delimiter">)</span><span class="delimiter">)</span>
			<a href="#2132076" title="sbt.TestEvent">event</a>.<a href="TestReportListener.scala.html#2097978" title="=&gt; Option[sbt.TestResult.Value]">result</a>
		<span class="delimiter">}</span>

		<a href="#2131838" title="(call: sbt.TestReportListener =&gt; Unit)Unit">safeListenersCall</a><span class="delimiter">(</span><a href="#2132125" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#361950" title="(name: String)Unit">startGroup</a><span class="delimiter">(</span><a href="#2132066" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">try</span>
		<span class="delimiter">{</span>
			<span class="keyword">val</span> <a title="sbt.TestResult.Value" id="2132126">result</a> = <a href="#2132067" title="()Option[sbt.TestResult.Value]">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="(default: =&gt; sbt.TestResult.Value)sbt.TestResult.Value">getOrElse</span><span class="delimiter">(</span><a href="#12272" title="object sbt.TestResult">TestResult</a>.<a href="#362198" title="=&gt; sbt.TestResult.Value">Passed</a><span class="delimiter">)</span>
			<a href="#2131838" title="(call: sbt.TestReportListener =&gt; Unit)Unit">safeListenersCall</a><span class="delimiter">(</span><a href="#2132133" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#361953" title="(name: String, result: sbt.TestResult.Value)Unit">endGroup</a><span class="delimiter">(</span><a href="#2132066" title="String">name</a>, <a href="#2132126" title="sbt.TestResult.Value">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<a href="#2132126" title="sbt.TestResult.Value">result</a>
		<span class="delimiter">}</span>
		<span class="keyword">catch</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <a title="sbt.TestResult.Value" id="2132138">e</a> =&gt;
				<a href="#2131838" title="(call: sbt.TestReportListener =&gt; Unit)Unit">safeListenersCall</a><span class="delimiter">(</span><a href="#2132140" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#361952" title="(name: String, t: Throwable)Unit">endGroup</a><span class="delimiter">(</span><a href="#2132066" title="String">name</a>, <a href="#2132138" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
				<a href="#12272" title="object sbt.TestResult">TestResult</a>.<a href="#362202" title="=&gt; sbt.TestResult.Value">Error</a>
		<span class="delimiter">}</span>
	<span class="delimiter">}</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(call: sbt.TestReportListener =&gt; Unit)Unit" id="2131838">safeListenersCall</a><span class="delimiter">(</span><a title="sbt.TestReportListener =&gt; Unit" id="2132120">call</a>: <span class="delimiter">(</span>TestReportListener<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
		<a href="#2133717" title="object sbt.TestFramework">TestFramework</a>.<a href="#361254" title="(it: Iterable[sbt.TestReportListener], log: sbt.Logger)(f: sbt.TestReportListener =&gt; Unit)Unit">safeForeach</a><span class="delimiter">(</span><a href="#2131846" title="Seq[sbt.TestReportListener]">listeners</a>, <a href="#2131847" title="sbt.Logger">log</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#2132120" title="sbt.TestReportListener =&gt; Unit">call</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object sbt.TestFramework" id="2133717">TestFramework</a>
<span title="ScalaObject" class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(framework: org.scalatools.testing.Framework)Seq[org.scalatools.testing.Fingerprint]" id="361247">getTests</a><span class="delimiter">(</span><a title="org.scalatools.testing.Framework" id="2109030">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span><span class="delimiter">)</span>: <span title="Seq[org.scalatools.testing.Fingerprint]">Seq</span><span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span> =
		<a href="#2109030" title="org.scalatools.testing.Framework">framework</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="(x$1: java.lang.String, x$2: &lt;repeated...&gt;[java.lang.Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="java.lang.String(&quot;tests&quot;)" class="string">&quot;tests&quot;</span><span class="delimiter">)</span>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[java.lang.Object])java.lang.Object">invoke</span><span class="delimiter">(</span><a href="#2109030" title="org.scalatools.testing.Framework">framework</a><span class="delimiter">)</span> <span title="Seq[org.scalatools.testing.Fingerprint]" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <a title="List[org.scalatools.testing.Fingerprint]" id="2132184">newStyle</a>: <span title="Array[org.scalatools.testing.Fingerprint]">Array</span><span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span> =&gt; <a href="#2132184" title="(xs: Array[org.scalatools.testing.Fingerprint])scala.collection.mutable.ArrayOps[org.scalatools.testing.Fingerprint]">newStyle</a>.<span title="=&gt; List[org.scalatools.testing.Fingerprint]">toList</span>
			<span class="keyword">case</span> <a title="List[org.scalatools.testing.TestFingerprint]" id="2132310">oldStyle</a>: <span title="Array[org.scalatools.testing.TestFingerprint]">Array</span><span class="delimiter">[</span>TestFingerprint<span class="delimiter">]</span> =&gt; <a href="#2132310" title="(xs: Array[org.scalatools.testing.TestFingerprint])scala.collection.mutable.ArrayOps[org.scalatools.testing.TestFingerprint]">oldStyle</a>.<span title="=&gt; List[org.scalatools.testing.TestFingerprint]">toList</span>
			<span class="keyword">case</span> <span title="Nothing">_</span> =&gt; <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Could not call \'tests\' on framework &quot;)" class="string">&quot;Could not call 'tests' on framework &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2109030" title="org.scalatools.testing.Framework">framework</a><span class="delimiter">)</span>
		<span class="delimiter">}</span>

	<span class="keyword">private</span> <span class="keyword">val</span> <a title="List[java.lang.String]" id="361248">ScalaCompilerJarPackages</a> = <span title="java.lang.String(&quot;scala.tools.&quot;)" class="string">&quot;scala.tools.&quot;</span> <a href="#2132168" title="(x: java.lang.String)List[java.lang.String]">::</a> <span title="java.lang.String(&quot;jline.&quot;)" class="string">&quot;jline.&quot;</span> <a href="#2132169" title="(x: java.lang.String)List[java.lang.String]">::</a> <span title="java.lang.String(&quot;ch.epfl.lamp.&quot;)" class="string">&quot;ch.epfl.lamp.&quot;</span> <a href="#2132170" title="(x: java.lang.String)List[java.lang.String]">::</a> <span title="object Nil">Nil</span>

	<span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="361250">TestStartName</a> = <span title="java.lang.String(&quot;test-start&quot;)" class="string">&quot;test-start&quot;</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="361252">TestFinishName</a> = <span title="java.lang.String(&quot;test-finish&quot;)" class="string">&quot;test-finish&quot;</span>
	
	<span class="keyword">private</span><span class="delimiter">[</span>sbt<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](it: Iterable[T], log: sbt.Logger)(f: T =&gt; Unit)Unit" id="361254">safeForeach</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="361256">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[T]" id="2132145">it</a>: <span title="Iterable[T]">Iterable</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="sbt.Logger" id="2132146">log</a>: <a href="Logger.scala.html#13079" title="sbt.Logger">Logger</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="T =&gt; Unit" id="2132147">f</a>: T =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> =
		<a href="#2132145" title="Iterable[T]">it</a>.<span title="(f: T =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="T" id="2132452">i</a> =&gt; <span class="keyword">try</span> <a href="#2132147" title="(v1: T)Unit">f</a><span class="delimiter">(</span><a href="#2132452" title="T">i</a><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Unit" id="2132454">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#2132146" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53741" title="(t: =&gt; Throwable)Unit">trace</a><span class="delimiter">(</span><a href="#2132454" title="Exception">e</a><span class="delimiter">)</span>; <a href="#2132146" title="sbt.Logger">log</a>.<a href="Logger.scala.html#53739" title="(message: =&gt; String)Unit">error</a><span class="delimiter">(</span><a href="#2132454" title="Exception">e</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>

	<span class="keyword">def</span> <a title="(a: org.scalatools.testing.Fingerprint, b: org.scalatools.testing.Fingerprint)Boolean" id="361257">matches</a><span class="delimiter">(</span><a title="org.scalatools.testing.Fingerprint" id="2131788">a</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span>, <a title="org.scalatools.testing.Fingerprint" id="2131789">b</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span><span class="delimiter">)</span> =
		<span title="(_1: org.scalatools.testing.Fingerprint, _2: org.scalatools.testing.Fingerprint)(org.scalatools.testing.Fingerprint, org.scalatools.testing.Fingerprint)" class="delimiter">(</span><a href="#2131788" title="org.scalatools.testing.Fingerprint">a</a>, <a href="#2131789" title="org.scalatools.testing.Fingerprint">b</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <span title="Boolean" class="delimiter">(</span><a title="org.scalatools.testing.SubclassFingerprint" id="2131800">a</a>: <span title="org.scalatools.testing.SubclassFingerprint">SubclassFingerprint</span>, <a title="org.scalatools.testing.SubclassFingerprint" id="2131801">b</a>: <span title="org.scalatools.testing.SubclassFingerprint">SubclassFingerprint</span><span class="delimiter">)</span> =&gt; <a href="#2131800" title="org.scalatools.testing.SubclassFingerprint">a</a>.<span title="()Boolean">isModule</span> <span title="(x: Boolean)Boolean">==</span> <a href="#2131801" title="org.scalatools.testing.SubclassFingerprint">b</a>.<span title="()Boolean">isModule</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#2131800" title="org.scalatools.testing.SubclassFingerprint">a</a>.<span title="()java.lang.String">superClassName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#2131801" title="org.scalatools.testing.SubclassFingerprint">b</a>.<span title="()java.lang.String">superClassName</span>
			<span class="keyword">case</span> <span title="Boolean" class="delimiter">(</span><a title="org.scalatools.testing.AnnotatedFingerprint" id="2131814">a</a>: <span title="org.scalatools.testing.AnnotatedFingerprint">AnnotatedFingerprint</span>, <a title="org.scalatools.testing.AnnotatedFingerprint" id="2131815">b</a>: <span title="org.scalatools.testing.AnnotatedFingerprint">AnnotatedFingerprint</span><span class="delimiter">)</span> =&gt; <a href="#2131814" title="org.scalatools.testing.AnnotatedFingerprint">a</a>.<span title="()Boolean">isModule</span> <span title="(x: Boolean)Boolean">==</span> <a href="#2131815" title="org.scalatools.testing.AnnotatedFingerprint">b</a>.<span title="()Boolean">isModule</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#2131814" title="org.scalatools.testing.AnnotatedFingerprint">a</a>.<span title="()java.lang.String">annotationName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#2131815" title="org.scalatools.testing.AnnotatedFingerprint">b</a>.<span title="()java.lang.String">annotationName</span>
			<span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
		<span class="delimiter">}</span>
	<span class="keyword">def</span> <a title="(f: org.scalatools.testing.Fingerprint)String" id="361258">toString</a><span class="delimiter">(</span><a title="org.scalatools.testing.Fingerprint" id="2131776">f</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span><span class="delimiter">)</span>: <span title="String">String</span> =
		<a href="#2131776" title="org.scalatools.testing.Fingerprint">f</a> <span title="String" class="keyword">match</span>
		<span class="delimiter">{</span>
			<span class="keyword">case</span> <a title="java.lang.String" id="2132464">sf</a>: <span title="org.scalatools.testing.SubclassFingerprint">SubclassFingerprint</span> =&gt; <span title="java.lang.String(&quot;subclass(&quot;)" class="string">&quot;subclass(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132464" title="org.scalatools.testing.SubclassFingerprint">sf</a>.<span title="()Boolean">isModule</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132464" title="org.scalatools.testing.SubclassFingerprint">sf</a>.<span title="()java.lang.String">superClassName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
			<span class="keyword">case</span> <a title="java.lang.String" id="2132465">af</a>: <span title="org.scalatools.testing.AnnotatedFingerprint">AnnotatedFingerprint</span> =&gt; <span title="java.lang.String(&quot;annotation(&quot;)" class="string">&quot;annotation(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132465" title="org.scalatools.testing.AnnotatedFingerprint">af</a>.<span title="()Boolean">isModule</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#2132465" title="org.scalatools.testing.AnnotatedFingerprint">af</a>.<span title="()java.lang.String">annotationName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
			<span class="keyword">case</span> <span title="java.lang.String">_</span> =&gt; <a href="#2131776" title="org.scalatools.testing.Fingerprint">f</a>.<span title="()java.lang.String">toString</span>
		<span class="delimiter">}</span>

	<span class="keyword">def</span> <a title="(frameworks: Seq[org.scalatools.testing.Framework], testLoader: java.lang.ClassLoader, tests: Seq[sbt.TestDefinition], log: sbt.Logger, listeners: Seq[sbt.TestReportListener], testArgsByFramework: Map[org.scalatools.testing.Framework,Seq[String]])(() =&gt; Unit, Iterable[(String, () =&gt; sbt.TestResult.Value)], sbt.TestResult.Value =&gt; (() =&gt; Unit))" id="361259">testTasks</a><span class="delimiter">(</span><a title="Seq[org.scalatools.testing.Framework]" id="2107897">frameworks</a>: <span title="Seq[org.scalatools.testing.Framework]">Seq</span><span class="delimiter">[</span>Framework<span class="delimiter">]</span>,
		<a title="java.lang.ClassLoader" id="2107898">testLoader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>,
		<a title="Seq[sbt.TestDefinition]" id="2107899">tests</a>: <span title="Seq[sbt.TestDefinition]">Seq</span><span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span>,
		<a title="sbt.Logger" id="2107900">log</a>: <a href="Logger.scala.html#13079" title="sbt.Logger">Logger</a>,
		<a title="Seq[sbt.TestReportListener]" id="2107901">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span><span class="delimiter">[</span>TestReportListener<span class="delimiter">]</span>,
		<a title="Map[org.scalatools.testing.Framework,Seq[String]]" id="2107902">testArgsByFramework</a>: <span title="Map[org.scalatools.testing.Framework,Seq[String]]">Map</span><span class="delimiter">[</span>Framework, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>:
			<span title="(() =&gt; Unit, Iterable[(String, () =&gt; sbt.TestResult.Value)], sbt.TestResult.Value =&gt; (() =&gt; Unit))" class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit, Iterable<span class="delimiter">[</span><span class="delimiter">(</span>String, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; TestResult.Value<span class="delimiter">)</span><span class="delimiter">]</span>, TestResult.Value =&gt; <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]" id="2132466">arguments</a> = <a href="#2107902" title="Map[org.scalatools.testing.Framework,Seq[String]]">testArgsByFramework</a> <span title="(d: Seq[String])scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]">withDefaultValue</span> <span title="object Nil">Nil</span>
		<span class="keyword">val</span> <a title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]" id="2132467">mappedTests</a> = <a href="#361260" title="(frameworks: Seq[org.scalatools.testing.Framework], tests: Seq[sbt.TestDefinition], args: Map[org.scalatools.testing.Framework,Seq[String]])Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">testMap</a><span class="delimiter">(</span><a href="#2107897" title="Seq[org.scalatools.testing.Framework]">frameworks</a>, <a href="#2107899" title="Seq[sbt.TestDefinition]">tests</a>, <a href="#2132466" title="scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]">arguments</a><span class="delimiter">)</span>
		<span title="(() =&gt; Unit, Iterable[(String, () =&gt; sbt.TestResult.Value)], sbt.TestResult.Value =&gt; (() =&gt; Unit))" class="keyword">if</span><span class="delimiter">(</span><a href="#2132467" title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">mappedTests</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
			<span title="(_1: () =&gt; Unit, _2: scala.collection.immutable.Nil.type, _3: sbt.TestResult.Value =&gt; (() =&gt; Unit))(() =&gt; Unit, scala.collection.immutable.Nil.type, sbt.TestResult.Value =&gt; (() =&gt; Unit))" class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>, <span title="object Nil">Nil</span>, <a title="sbt.TestResult.Value" id="2132485">_</a> =&gt; <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">)</span>
		<span class="keyword">else</span>
			<a href="#361262" title="(loader: java.lang.ClassLoader, tests: Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])], log: sbt.Logger, listeners: Seq[sbt.TestReportListener])(() =&gt; Unit, List[(String, () =&gt; sbt.TestResult.Value)], sbt.TestResult.Value =&gt; (() =&gt; Unit))">createTestTasks</a><span class="delimiter">(</span><a href="#2107898" title="java.lang.ClassLoader">testLoader</a>, <a href="#2132467" title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">mappedTests</a>, <a href="#2107900" title="sbt.Logger">log</a>, <a href="#2107901" title="Seq[sbt.TestReportListener]">listeners</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(frameworks: Seq[org.scalatools.testing.Framework], tests: Seq[sbt.TestDefinition], args: Map[org.scalatools.testing.Framework,Seq[String]])Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]" id="361260">testMap</a><span class="delimiter">(</span><a title="Seq[org.scalatools.testing.Framework]" id="2132473">frameworks</a>: <span title="Seq[org.scalatools.testing.Framework]">Seq</span><span class="delimiter">[</span>Framework<span class="delimiter">]</span>, <a title="Seq[sbt.TestDefinition]" id="2132474">tests</a>: <span title="Seq[sbt.TestDefinition]">Seq</span><span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span>, <a title="Map[org.scalatools.testing.Framework,Seq[String]]" id="2132475">args</a>: <span title="Map[org.scalatools.testing.Framework,Seq[String]]">Map</span><span class="delimiter">[</span>Framework, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>:
		<span title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">Map</span><span class="delimiter">[</span>Framework, <span class="delimiter">(</span>Set<span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span>, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, Set<span class="delimiter">}</span>
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]" id="2132970">map</a> = <span title="()scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">HashMap</span><span class="delimiter">[</span>Framework, Set<span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span><span class="delimiter">]</span>
		<span class="keyword">def</span> <a title="()Unit" id="2132971">assignTests</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<span class="delimiter">{</span>
			<span class="keyword">for</span><span class="delimiter">(</span><a title="sbt.TestDefinition" id="2132993">test</a> &lt;- <a href="#2132474" title="(f: sbt.TestDefinition =&gt; Unit)Unit">tests</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#2132970" title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">map</a>.<span title="=&gt; Iterable[scala.collection.mutable.Set[sbt.TestDefinition]]">values</span>.<span title="(p: scala.collection.mutable.Set[sbt.TestDefinition] =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#2132986" title="scala.collection.mutable.Set[sbt.TestDefinition]">_</a>.<span title="(elem: sbt.TestDefinition)Boolean">contains</span><span class="delimiter">(</span><a href="#2132993" title="sbt.TestDefinition">test</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
			<span class="delimiter">{</span>
				<span class="keyword">def</span> <a title="(framework: org.scalatools.testing.Framework)Boolean" id="2132994">isTestForFramework</a><span class="delimiter">(</span><a title="org.scalatools.testing.Framework" id="2132995">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span><span class="delimiter">)</span> = <a href="#361247" title="(framework: org.scalatools.testing.Framework)Seq[org.scalatools.testing.Fingerprint]">getTests</a><span class="delimiter">(</span><a href="#2132995" title="org.scalatools.testing.Framework">framework</a><span class="delimiter">)</span>.<span title="(p: org.scalatools.testing.Fingerprint =&gt; Boolean)Boolean">exists</span> <span class="delimiter">{</span><a title="org.scalatools.testing.Fingerprint" id="2133003">t</a> =&gt; <a href="#361257" title="(a: org.scalatools.testing.Fingerprint, b: org.scalatools.testing.Fingerprint)Boolean">matches</a><span class="delimiter">(</span><a href="#2133003" title="org.scalatools.testing.Fingerprint">t</a>, <a href="#2132993" title="sbt.TestDefinition">test</a>.<a href="#2109400" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a><span class="delimiter">)</span> <span class="delimiter">}</span>
				<span class="keyword">for</span><span class="delimiter">(</span><a title="org.scalatools.testing.Framework" id="2133014">framework</a> &lt;- <a href="#2132473" title="Seq[org.scalatools.testing.Framework]">frameworks</a>.<span title="(p: org.scalatools.testing.Framework =&gt; Boolean)Option[org.scalatools.testing.Framework]">find</span><span title="(f: org.scalatools.testing.Framework =&gt; scala.collection.mutable.Set[sbt.TestDefinition])Unit" class="delimiter">(</span><a href="#2132994" title="(framework: org.scalatools.testing.Framework)Boolean">isTestForFramework</a><span class="delimiter">)</span><span class="delimiter">)</span>
					<a href="#2132970" title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">map</a>.<span title="(key: org.scalatools.testing.Framework, op: =&gt; scala.collection.mutable.Set[sbt.TestDefinition])scala.collection.mutable.Set[sbt.TestDefinition]">getOrElseUpdate</span><span class="delimiter">(</span><a href="#2133014" title="org.scalatools.testing.Framework">framework</a>, <span title="()scala.collection.mutable.HashSet[sbt.TestDefinition]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[sbt.TestDefinition]">HashSet</span><span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span><span class="delimiter">)</span> <span title="(elem: sbt.TestDefinition)scala.collection.mutable.Set[sbt.TestDefinition]">+=</span> <a href="#2132993" title="sbt.TestDefinition">test</a>
			<span class="delimiter">}</span>
		<span class="delimiter">}</span>
		<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#2132473" title="Seq[org.scalatools.testing.Framework]">frameworks</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
			<a href="#2132971" title="()Unit">assignTests</a><span class="delimiter">(</span><span class="delimiter">)</span>
		<a href="#2132970" title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">map</a>.<span title="(implicit ev: &lt;:&lt;[(org.scalatools.testing.Framework, scala.collection.mutable.Set[sbt.TestDefinition]),(org.scalatools.testing.Framework, scala.collection.mutable.Set[sbt.TestDefinition])])scala.collection.immutable.Map[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">toMap</span> <span title="(f: (org.scalatools.testing.Framework, scala.collection.mutable.Set[sbt.TestDefinition]) =&gt; (Set[sbt.TestDefinition], Seq[String]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]],(org.scalatools.testing.Framework, (Set[sbt.TestDefinition], Seq[String])),Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]])Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">transform</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="org.scalatools.testing.Framework" id="2133079">framework</a>, <a title="scala.collection.mutable.Set[sbt.TestDefinition]" id="2133080">tests</a><span class="delimiter">)</span> =&gt; <span title="(_1: Set[sbt.TestDefinition], _2: Seq[String])(Set[sbt.TestDefinition], Seq[String])" class="delimiter">(</span> <a href="#361261" title="(framework: org.scalatools.testing.Framework, tests: Seq[sbt.TestDefinition])Set[sbt.TestDefinition]">mergeDuplicates</a><span class="delimiter">(</span><a href="#2133079" title="org.scalatools.testing.Framework">framework</a>, <a href="#2133080" title="scala.collection.mutable.Set[sbt.TestDefinition]">tests</a>.<span title="=&gt; Seq[sbt.TestDefinition]">toSeq</span><span class="delimiter">)</span>, <a href="#2132475" title="(key: org.scalatools.testing.Framework)Seq[String]">args</a><span class="delimiter">(</span><a href="#2133079" title="org.scalatools.testing.Framework">framework</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>;
	<span class="delimiter">}</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(framework: org.scalatools.testing.Framework, tests: Seq[sbt.TestDefinition])Set[sbt.TestDefinition]" id="361261">mergeDuplicates</a><span class="delimiter">(</span><a title="org.scalatools.testing.Framework" id="2133085">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span>, <a title="Seq[sbt.TestDefinition]" id="2133086">tests</a>: <span title="Seq[sbt.TestDefinition]">Seq</span><span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[sbt.TestDefinition]">Set</span><span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="Array[org.scalatools.testing.Fingerprint]" id="2133168">frameworkPrints</a> = <a href="#2133085" title="org.scalatools.testing.Framework">framework</a>.<span title="(xs: Array[org.scalatools.testing.Fingerprint])scala.collection.mutable.ArrayOps[org.scalatools.testing.Fingerprint]">tests</span>.<span title="=&gt; Array[org.scalatools.testing.Fingerprint]">reverse</span>
		<span class="keyword">def</span> <a title="(prints: Seq[org.scalatools.testing.Fingerprint])org.scalatools.testing.Fingerprint" id="2133169">pickOne</a><span class="delimiter">(</span><a title="Seq[org.scalatools.testing.Fingerprint]" id="2133242">prints</a>: <span title="Seq[org.scalatools.testing.Fingerprint]">Seq</span><span class="delimiter">[</span>Fingerprint<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span> =
			<a href="#2133168" title="(xs: Array[org.scalatools.testing.Fingerprint])scala.collection.mutable.ArrayOps[org.scalatools.testing.Fingerprint]">frameworkPrints</a>.<span title="(p: org.scalatools.testing.Fingerprint =&gt; Boolean)Option[org.scalatools.testing.Fingerprint]">find</span><span class="delimiter">(</span><a href="#2133242" title="Seq[org.scalatools.testing.Fingerprint]">prints</a>.<span title="scala.collection.immutable.Set[org.scalatools.testing.Fingerprint]">toSet</span><span class="delimiter">)</span> <span title="(default: =&gt; org.scalatools.testing.Fingerprint)org.scalatools.testing.Fingerprint">getOrElse</span> <a href="#2133242" title="Seq[org.scalatools.testing.Fingerprint]">prints</a>.<span title="=&gt; org.scalatools.testing.Fingerprint">head</span>
		<span class="keyword">val</span> <a title="scala.collection.immutable.Iterable[sbt.TestDefinition]" id="2133170">uniqueDefs</a> =
			<span class="keyword">for</span><span class="delimiter">(</span> <span class="delimiter">(</span><a title="String" id="2133587">name</a>, <a title="Seq[sbt.TestDefinition]" id="2133588">defs</a><span class="delimiter">)</span> &lt;- <a href="#2133086" title="Seq[sbt.TestDefinition]">tests</a>.<span title="(f: sbt.TestDefinition =&gt; String)scala.collection.immutable.Map[String,Seq[sbt.TestDefinition]]">groupBy</span><a href="#2133560" title="(f: ((String, Seq[sbt.TestDefinition])) =&gt; sbt.TestDefinition)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[String,Seq[sbt.TestDefinition]],sbt.TestDefinition,scala.collection.immutable.Iterable[sbt.TestDefinition]])scala.collection.immutable.Iterable[sbt.TestDefinition]" class="delimiter">(</a><a href="#2133549" title="sbt.TestDefinition">_</a>.<a href="#2109399" title="=&gt; String">name</a><span class="delimiter">)</span> <span class="delimiter">)</span> <span class="keyword">yield</span>
				<span title="sbt.TestDefinition" class="keyword">new</span> <a href="#12279" title="sbt.TestDefinition">TestDefinition</a><span class="delimiter">(</span><a href="#2133587" title="String">name</a>, <a href="#2133169" title="(prints: Seq[org.scalatools.testing.Fingerprint])org.scalatools.testing.Fingerprint">pickOne</a><span class="delimiter">(</span><a href="#2133588" title="Seq[sbt.TestDefinition]">defs</a>.<span title="(f: sbt.TestDefinition =&gt; org.scalatools.testing.Fingerprint)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.TestDefinition],org.scalatools.testing.Fingerprint,Seq[org.scalatools.testing.Fingerprint]])Seq[org.scalatools.testing.Fingerprint]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.scalatools.testing.Fingerprint,Seq[org.scalatools.testing.Fingerprint]]" class="delimiter">(</span><a href="#2133605" title="sbt.TestDefinition">_</a>.<a href="#2109400" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<a href="#2133170" title="scala.collection.immutable.Iterable[sbt.TestDefinition]">uniqueDefs</a>.<span title="scala.collection.immutable.Set[sbt.TestDefinition]">toSet</span>
	<span class="delimiter">}</span>
		
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(loader: java.lang.ClassLoader, tests: Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])], log: sbt.Logger, listeners: Seq[sbt.TestReportListener])(() =&gt; Unit, List[(String, () =&gt; sbt.TestResult.Value)], sbt.TestResult.Value =&gt; (() =&gt; Unit))" id="361262">createTestTasks</a><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="2132490">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]" id="2132491">tests</a>: <span title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">Map</span><span class="delimiter">[</span>Framework, <span class="delimiter">(</span>Set<span class="delimiter">[</span>TestDefinition<span class="delimiter">]</span>, Seq<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>, <a title="sbt.Logger" id="2132492">log</a>: <a href="Logger.scala.html#13079" title="sbt.Logger">Logger</a>, <a title="Seq[sbt.TestReportListener]" id="2132493">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span><span class="delimiter">[</span>TestReportListener<span class="delimiter">]</span><span class="delimiter">)</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="Seq[sbt.TestsListener]" id="2132496">testsListeners</a> = <a href="#2132493" title="Seq[sbt.TestReportListener]">listeners</a> <span title="(pf: PartialFunction[sbt.TestReportListener,sbt.TestsListener])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.TestReportListener],sbt.TestsListener,Seq[sbt.TestsListener]])Seq[sbt.TestsListener]">collect</span> <a href="#2132514" title="sbt.TestsListener" class="delimiter">{</a> <span class="keyword">case</span> <a title="sbt.TestsListener" id="2132515">tl</a>: <a href="TestReportListener.scala.html#12286" title="sbt.TestsListener">TestsListener</a> =&gt; <a href="#2132515" title="sbt.TestsListener">tl</a> <span class="delimiter">}</span>
		<span class="keyword">def</span> <a title="(f: sbt.TestsListener =&gt; Unit)() =&gt; Unit" id="2132497">foreachListenerSafe</a><span class="delimiter">(</span><a title="sbt.TestsListener =&gt; Unit" id="2132536">f</a>: TestsListener =&gt; Unit<span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#361254" title="(it: Iterable[sbt.TestsListener], log: sbt.Logger)(f: sbt.TestsListener =&gt; Unit)Unit">safeForeach</a><span class="delimiter">(</span><a href="#2132496" title="Seq[sbt.TestsListener]">testsListeners</a>, <a href="#2132492" title="sbt.Logger">log</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#2132536" title="sbt.TestsListener =&gt; Unit">f</a><span class="delimiter">)</span>
		
			<span class="keyword">import</span> <a href="#12272" title="object sbt.TestResult">TestResult</a>.<span class="delimiter">{</span>Error,Passed,Failed<span class="delimiter">}</span>

		<span class="keyword">val</span> <a title="() =&gt; Unit" id="2132499">startTask</a> = <a href="#2132497" title="(f: sbt.TestsListener =&gt; Unit)() =&gt; Unit">foreachListenerSafe</a><span class="delimiter">(</span><a href="#2132556" title="sbt.TestsListener">_</a>.<a href="TestReportListener.scala.html#363415" title="()Unit">doInit</a><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="scala.collection.IterableView[(String, () =&gt; sbt.TestResult.Value),Iterable[_]]" id="2132500">testTasks</a> =
			<a href="#2132491" title="Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]">tests</a>.<span title="=&gt; java.lang.Object with scala.collection.IterableView[(org.scalatools.testing.Framework, (Set[sbt.TestDefinition], Seq[String])),scala.collection.immutable.Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]]">view</span> <span title="(f: ((org.scalatools.testing.Framework, (Set[sbt.TestDefinition], Seq[String]))) =&gt; scala.collection.GenTraversableOnce[(String, () =&gt; sbt.TestResult.Value)])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.IterableView[(org.scalatools.testing.Framework, (Set[sbt.TestDefinition], Seq[String])),scala.collection.immutable.Map[org.scalatools.testing.Framework,(Set[sbt.TestDefinition], Seq[String])]],(String, () =&gt; sbt.TestResult.Value),scala.collection.IterableView[(String, () =&gt; sbt.TestResult.Value),Iterable[_]]])scala.collection.IterableView[(String, () =&gt; sbt.TestResult.Value),Iterable[_]]">flatMap</span> <a href="#2132615" title="scala.collection.immutable.Set[(String, () =&gt; sbt.TestResult.Value)]" class="delimiter">{</a> <span class="keyword">case</span> <span title="scala.collection.immutable.Set[(String, () =&gt; sbt.TestResult.Value)]" class="delimiter">(</span><a title="org.scalatools.testing.Framework" id="2132618">framework</a>, <span class="delimiter">(</span><a title="Set[sbt.TestDefinition]" id="2132621">testDefinitions</a>, <a title="Seq[String]" id="2132622">testArgs</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
			
					<span class="keyword">val</span> <a title="sbt.TestRunner" id="2132623">runner</a> = <span title="sbt.TestRunner" class="keyword">new</span> <a href="#12280" title="sbt.TestRunner">TestRunner</a><span class="delimiter">(</span><a href="#2132618" title="org.scalatools.testing.Framework">framework</a>, <a href="#2132490" title="java.lang.ClassLoader">loader</a>, <a href="#2132493" title="Seq[sbt.TestReportListener]">listeners</a>, <a href="#2132492" title="sbt.Logger">log</a><span class="delimiter">)</span>
					<span class="keyword">for</span><span class="delimiter">(</span><a title="sbt.TestDefinition" id="2132646">testDefinition</a> &lt;- <a href="#2132621" title="(f: sbt.TestDefinition =&gt; (String, () =&gt; sbt.TestResult.Value))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[sbt.TestDefinition],(String, () =&gt; sbt.TestResult.Value),scala.collection.immutable.Set[(String, () =&gt; sbt.TestResult.Value)]])scala.collection.immutable.Set[(String, () =&gt; sbt.TestResult.Value)]">testDefinitions</a><span class="delimiter">)</span> <span class="keyword">yield</span>
					<span class="delimiter">{</span>
						<span class="keyword">val</span> <a title="() =&gt; sbt.TestResult.Value" id="2132647">runTest</a> = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#361263" title="(loader: java.lang.ClassLoader)(eval: =&gt; sbt.TestResult.Value)sbt.TestResult.Value">withContextLoader</a><span class="delimiter">(</span><a href="#2132490" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#2132623" title="sbt.TestRunner">runner</a>.<a href="#2131837" title="(testDefinition: sbt.TestDefinition, args: Seq[String])sbt.TestResult.Value">run</a><span class="delimiter">(</span><a href="#2132646" title="sbt.TestDefinition">testDefinition</a>, <a href="#2132622" title="Seq[String]">testArgs</a><span class="delimiter">)</span> <span class="delimiter">}</span>
						<span title="(_1: String, _2: () =&gt; sbt.TestResult.Value)(String, () =&gt; sbt.TestResult.Value)" class="delimiter">(</span><a href="#2132646" title="sbt.TestDefinition">testDefinition</a>.<a href="#2109399" title="=&gt; String">name</a>, <a href="#2132647" title="() =&gt; sbt.TestResult.Value">runTest</a><span class="delimiter">)</span>
					<span class="delimiter">}</span>
			<span class="delimiter">}</span>

		<span class="keyword">val</span> <a title="sbt.TestResult.Value =&gt; (() =&gt; Unit)" id="2132501">endTask</a> = <span class="delimiter">(</span>result: TestResult.<span title="sbt.TestResult.Value">Value</span><span class="delimiter">)</span> =&gt; <a href="#2132497" title="(f: sbt.TestsListener =&gt; Unit)() =&gt; Unit">foreachListenerSafe</a><span class="delimiter">(</span><a href="#2132950" title="sbt.TestsListener">_</a>.<a href="TestReportListener.scala.html#363416" title="(finalResult: sbt.TestResult.Value)Unit">doComplete</a><span class="delimiter">(</span><a href="#2132948" title="sbt.TestResult.Value">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
		<span title="(_1: () =&gt; Unit, _2: List[(String, () =&gt; sbt.TestResult.Value)], _3: sbt.TestResult.Value =&gt; (() =&gt; Unit))(() =&gt; Unit, List[(String, () =&gt; sbt.TestResult.Value)], sbt.TestResult.Value =&gt; (() =&gt; Unit))" class="delimiter">(</span><a href="#2132499" title="() =&gt; Unit">startTask</a>, <a href="#2132500" title="scala.collection.IterableView[(String, () =&gt; sbt.TestResult.Value),Iterable[_]]">testTasks</a>.<span title="=&gt; List[(String, () =&gt; sbt.TestResult.Value)]">toList</span>, <a href="#2132501" title="sbt.TestResult.Value =&gt; (() =&gt; Unit)">endTask</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T](loader: java.lang.ClassLoader)(eval: =&gt; T)T" id="361263">withContextLoader</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="361265">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.lang.ClassLoader" id="2132649">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="2132650">eval</a>: =&gt; T<span class="delimiter">)</span>: <a href="#361265" title="T">T</a> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="2133667">oldLoader</a> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span>
		<span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(x$1: java.lang.ClassLoader)Unit">setContextClassLoader</span><span class="delimiter">(</span><a href="#2132649" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span>
		<span class="keyword">try</span> <span class="delimiter">{</span> <a href="#2132650" title="=&gt; T">eval</a> <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span> <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(x$1: java.lang.ClassLoader)Unit">setContextClassLoader</span><span class="delimiter">(</span><a href="#2133667" title="java.lang.ClassLoader">oldLoader</a><span class="delimiter">)</span> <span class="delimiter">}</span>
	<span class="delimiter">}</span>
	<span class="keyword">def</span> <a title="(classpath: Seq[java.io.File], scalaInstance: sbt.ScalaInstance, tempDir: java.io.File)java.lang.ClassLoader" id="361266">createTestLoader</a><span class="delimiter">(</span><a title="Seq[java.io.File]" id="361275">classpath</a>: <span title="Seq[java.io.File]">Seq</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="sbt.ScalaInstance" id="361276">scalaInstance</a>: <a href="ScalaInstance.scala.html#12428" title="sbt.ScalaInstance">ScalaInstance</a>, <a title="java.io.File" id="361277">tempDir</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="java.lang.ClassLoader">ClassLoader</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="Boolean" id="2133668">declaresCompiler</a> = <a href="#361275" title="Seq[java.io.File]">classpath</a>.<span title="(p: java.io.File =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#2133678" title="java.io.File">_</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: java.lang.CharSequence)Boolean">contains</span> <span title="java.lang.String(&quot;scala-compiler&quot;)" class="string">&quot;scala-compiler&quot;</span><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="2133669">filterCompilerLoader</a> = <span title="java.lang.ClassLoader" class="keyword">if</span><span class="delimiter">(</span><a href="#2133668" title="Boolean">declaresCompiler</a><span class="delimiter">)</span> <a href="#361276" title="sbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#53769" title="=&gt; java.lang.ClassLoader">loader</a> <span class="keyword">else</span> <a href="ClassLoaders.scala.html#2133684" title="(parent: java.lang.ClassLoader, excludePackages: Iterable[String])sbt.classpath.FilteredLoader" class="keyword">new</a> <a href="ClassLoaders.scala.html#12369" title="sbt.classpath.FilteredLoader">FilteredLoader</a><span class="delimiter">(</span><a href="#361276" title="sbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#53769" title="=&gt; java.lang.ClassLoader">loader</a>, <a href="#361248" title="=&gt; List[java.lang.String]">ScalaCompilerJarPackages</a><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="String =&gt; Boolean" id="2133670">interfaceFilter</a> = <span class="delimiter">(</span>name: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#2133696" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;org.scalatools.testing.&quot;)" class="string">&quot;org.scalatools.testing.&quot;</span><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="String =&gt; Boolean" id="2133671">notInterfaceFilter</a> = <span class="delimiter">(</span>name: <span title="String">String</span><span class="delimiter">)</span> =&gt; <span title="=&gt; Boolean">!</span><a href="#2133670" title="(v1: String)Boolean">interfaceFilter</a><span class="delimiter">(</span><a href="#2133700" title="String">name</a><span class="delimiter">)</span>
		<span class="keyword">val</span> <a title="sbt.classpath.DualLoader" id="2133672">dual</a> = <span title="sbt.classpath.DualLoader" class="keyword">new</span> <a href="DualLoader.scala.html#12399" title="sbt.classpath.DualLoader">DualLoader</a><span class="delimiter">(</span><a href="#2133669" title="java.lang.ClassLoader">filterCompilerLoader</a>, <a href="#2133671" title="String =&gt; Boolean">notInterfaceFilter</a>, <a title="String" id="2133705">x</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>, <span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.ClassLoader">getClassLoader</span>, <a href="#2133670" title="String =&gt; Boolean">interfaceFilter</a>, <a title="String" id="2133708">x</a> =&gt; <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
		<a href="ClasspathUtilities.scala.html#12390" title="object sbt.classpath.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#146169" title="(classpath: Seq[java.io.File], parent: java.lang.ClassLoader, instance: sbt.ScalaInstance, nativeTemp: java.io.File)java.lang.ClassLoader">makeLoader</a><span class="delimiter">(</span><a href="#361275" title="Seq[java.io.File]">classpath</a>, <a href="#2133672" title="sbt.classpath.DualLoader">dual</a>, <a href="#361276" title="sbt.ScalaInstance">scalaInstance</a>, <a href="#361277" title="java.io.File">tempDir</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>