<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>Analyzer.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt

<span class="keyword">import</span> scala.tools.nsc.<span class="delimiter">{</span>io, plugins, symtab, Global, Phase<span class="delimiter">}</span>
<span class="keyword">import</span> io.<span class="delimiter">{</span>AbstractFile, PlainFile, ZipArchive<span class="delimiter">}</span>
<span class="keyword">import</span> plugins.<span class="delimiter">{</span>Plugin, PluginComponent<span class="delimiter">}</span>
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span>HashMap, HashSet, Map, Set<span class="delimiter">}</span>

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.util.zip.ZipFile
<span class="keyword">import</span> xsbti.AnalysisCallback

<span class="keyword">object</span> <a title="object xsbt.Analyzer" id="9970">Analyzer</a>
<span title="ScalaObject" class="delimiter">{</span>
	<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="159321">name</a> = <span title="java.lang.String(&quot;xsbt-analyzer&quot;)" class="string">&quot;xsbt-analyzer&quot;</span>
<span class="delimiter">}</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class Analyzer extends xsbt.Compat with ScalaObject" id="9972">Analyzer</a><a href="#9972" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="xsbt.CallbackGlobal" id="159335">global</a>: <a href="CompilerInterface.scala.html#9999" title="xsbt.CallbackGlobal">CallbackGlobal</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#9973" title="xsbt.Compat">Compat</a>
<span class="delimiter">{</span>
	<span class="keyword">import</span> <a href="#159335" title="=&gt; xsbt.CallbackGlobal">global</a>._

	<span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)scala.tools.nsc.Phase" id="159327">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="159342">prev</a>: <span title="scala.tools.nsc.Phase">Phase</span><span class="delimiter">)</span>: <span title="scala.tools.nsc.Phase">Phase</span> = <span title="Analyzer.this.AnalyzerPhase" class="keyword">new</span> <a href="#159328" title="Analyzer.this.AnalyzerPhase">AnalyzerPhase</a><span class="delimiter">(</span><a href="#159342" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span>
	<span class="keyword">private</span> <span class="keyword">class</span> <a title="class AnalyzerPhase extends scala.tools.nsc.Phase with ScalaObject" id="159328">AnalyzerPhase</a><a href="#159328" title="ScalaObject" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="159350">prev</a>: <span title="scala.tools.nsc.Phase">Phase</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="scala.tools.nsc.Phase">Phase</span><span class="delimiter">(</span><a href="#159350" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span>
	<span class="delimiter">{</span>
		<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="159347">description</a> = <span title="java.lang.String(&quot;Extracts dependency information, finds concrete instances of provided superclasses, and application entry points.&quot;)" class="string">&quot;Extracts dependency information, finds concrete instances of provided superclasses, and application entry points.&quot;</span>
		<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="159348">name</a> = <a href="#9970" title="object xsbt.Analyzer">Analyzer</a>.<a href="#159321" title="=&gt; java.lang.String">name</a>
		<span class="keyword">def</span> <a title="()Unit" id="159349">run</a>
		<span class="delimiter">{</span>
			<span class="keyword">val</span> <a title="java.io.File" id="159361">outputDirectory</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#159335" title="=&gt; xsbt.CallbackGlobal">global</a>.<span title="=&gt; scala.tools.nsc.Settings">settings</span>.<span title="=&gt; scala.tools.nsc.Settings#OutputSetting">outdir</span>.<span title="=&gt; java.lang.String">value</span><span class="delimiter">)</span>

			<span class="keyword">for</span><span class="delimiter">(</span><a title="Analyzer.this.global.CompilationUnit" id="159400">unit</a> &lt;- <a href="#159335" title="=&gt; Analyzer.this.global.Run">currentRun</a>.<span title="(f: Analyzer.this.global.CompilationUnit =&gt; Unit)Unit">units</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#159400" title="Analyzer.this.global.CompilationUnit">unit</a>.<span title="=&gt; Boolean">isJava</span><span class="delimiter">)</span>
			<span class="delimiter">{</span>
				<span class="comment">// build dependencies structure</span>
				<span class="keyword">val</span> <a title="scala.tools.nsc.io.package.JFile" id="159401">sourceFile</a> = <a href="#159400" title="Analyzer.this.global.CompilationUnit">unit</a>.<span title="=&gt; scala.tools.nsc.util.SourceFile">source</span>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">file</span>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>
				<a href="CompilerInterface.scala.html#154712" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="xsbti/AnalysisCallback.java.html#53866" title="(source: java.io.File)Unit">beginSource</a><span class="delimiter">(</span><a href="#159401" title="scala.tools.nsc.io.package.JFile">sourceFile</a><span class="delimiter">)</span>
				<span class="keyword">for</span><span class="delimiter">(</span><a title="Analyzer.this.global.Symbol" id="159421">on</a> &lt;- <a href="#159400" title="Analyzer.this.global.CompilationUnit">unit</a>.<span title="(f: Analyzer.this.global.Symbol =&gt; Unit)Unit">depends</span><span class="delimiter">)</span>
				<span class="delimiter">{</span>
					<span class="keyword">def</span> <a title="(file: java.io.File, className: String)Unit" id="159422">binaryDependency</a><span class="delimiter">(</span><a title="java.io.File" id="159424">file</a>: <span title="java.io.File">File</span>, <a title="String" id="159425">className</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="CompilerInterface.scala.html#154712" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="xsbti/AnalysisCallback.java.html#53868" title="(binary: java.io.File, name: java.lang.String, source: java.io.File)Unit">binaryDependency</a><span class="delimiter">(</span><a href="#159424" title="java.io.File">file</a>, <a href="#159425" title="String">className</a>, <a href="#159401" title="scala.tools.nsc.io.package.JFile">sourceFile</a><span class="delimiter">)</span>
					<span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="159423">onSource</a> = <a href="#159421" title="Analyzer.this.global.Symbol">on</a>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</span>
					<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#159423" title="scala.tools.nsc.io.AbstractFile">onSource</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
					<span class="delimiter">{</span>
						<a href="#159330" title="(sym: Analyzer.this.global.Symbol)Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]">classFile</a><span class="delimiter">(</span><a href="#159421" title="Analyzer.this.global.Symbol">on</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span>
						<span class="delimiter">{</span>
							<span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="159436">f</a>,<a title="String" id="159437">className</a>,<a title="Boolean" id="159438">inOutDir</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
								<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#159438" title="Boolean">inOutDir</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#159421" title="Analyzer.this.global.Symbol">on</a>.<span title="=&gt; Boolean">isJavaDefined</span><span class="delimiter">)</span> <a href="#159335" title="(sym: Analyzer.this.global.Symbol)Unit">registerTopLevelSym</a><span class="delimiter">(</span><a href="#159421" title="Analyzer.this.global.Symbol">on</a><span class="delimiter">)</span>
								<a href="#159436" title="scala.tools.nsc.io.AbstractFile">f</a> <span title="Unit" class="keyword">match</span>
								<span class="delimiter">{</span>
									<span class="keyword">case</span> <a title="Unit" id="159443">ze</a>: ZipArchive#<span title="scala.tools.nsc.io.ZipArchive#Entry">Entry</span> =&gt; <span class="keyword">for</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.ZipArchive" id="159555">zip</a> &lt;- <a href="#159443" title="scala.tools.nsc.io.ZipArchive#Entry">ze</a>.<span title="(f: scala.tools.nsc.io.ZipArchive =&gt; Unit)Unit">underlyingSource</span>; <a title="scala.tools.nsc.io.package.JFile" id="159563">zipFile</a> &lt;- <span title="(x: scala.tools.nsc.io.package.JFile)Option[scala.tools.nsc.io.package.JFile]">Option</span><span title="(f: scala.tools.nsc.io.package.JFile =&gt; Unit)Unit" class="delimiter">(</span><a href="#159555" title="scala.tools.nsc.io.ZipArchive">zip</a>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span><span class="delimiter">)</span> <span class="delimiter">)</span> <a href="#159422" title="(file: java.io.File, className: String)Unit">binaryDependency</a><span class="delimiter">(</span><a href="#159563" title="scala.tools.nsc.io.package.JFile">zipFile</a>, <a href="#159437" title="String">className</a><span class="delimiter">)</span>
									<span class="keyword">case</span> <a title="Unit" id="159566">pf</a>: <span title="scala.tools.nsc.io.PlainFile">PlainFile</span> =&gt; <a href="#159422" title="(file: java.io.File, className: String)Unit">binaryDependency</a><span class="delimiter">(</span><a href="#159566" title="scala.tools.nsc.io.PlainFile">pf</a>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>, <a href="#159437" title="String">className</a><span class="delimiter">)</span>
									<span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
								<span class="delimiter">}</span>
							<span class="keyword">case</span> <span title="Unit">None</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
						<span class="delimiter">}</span>
					<span class="delimiter">}</span>
					<span class="keyword">else</span>
						<a href="CompilerInterface.scala.html#154712" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="xsbti/AnalysisCallback.java.html#53867" title="(dependsOn: java.io.File, source: java.io.File)Unit">sourceDependency</a><span class="delimiter">(</span><a href="#159423" title="scala.tools.nsc.io.AbstractFile">onSource</a>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>, <a href="#159401" title="scala.tools.nsc.io.package.JFile">sourceFile</a><span class="delimiter">)</span>
				<span class="delimiter">}</span>

				<span class="comment">// build list of generated classes</span>
				<span class="keyword">for</span><span class="delimiter">(</span><a title="Analyzer.this.global.icodes.IClass" id="161150">iclass</a> &lt;- <a href="#159400" title="Analyzer.this.global.CompilationUnit">unit</a>.<span title="(f: Analyzer.this.global.icodes.IClass =&gt; Unit)Unit">icode</span><span class="delimiter">)</span>
				<span class="delimiter">{</span>
					<span class="keyword">val</span> <a title="Analyzer.this.global.icodes.global.Symbol" id="161151">sym</a> = <a href="#161150" title="Analyzer.this.global.icodes.IClass">iclass</a>.<span title="=&gt; Analyzer.this.global.icodes.global.Symbol">symbol</span>
					<span class="keyword">def</span> <a title="(separatorRequired: Boolean)Unit" id="161152">addGenerated</a><span class="delimiter">(</span><a title="Boolean" id="163706">separatorRequired</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>
					<span class="delimiter">{</span>
						<span class="keyword">val</span> <a title="java.io.File" id="163707">classFile</a> = <a href="#159334" title="(outputDirectory: java.io.File, s: Analyzer.this.global.Symbol, separatorRequired: Boolean)java.io.File">fileForClass</a><span class="delimiter">(</span><a href="#159361" title="java.io.File">outputDirectory</a>, <a href="#161151" title="Analyzer.this.global.icodes.global.Symbol">sym</a>, <a href="#163706" title="Boolean">separatorRequired</a><span class="delimiter">)</span>
						<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#163707" title="java.io.File">classFile</a>.<span title="()Boolean">exists</span><span class="delimiter">)</span>
							<a href="CompilerInterface.scala.html#154712" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="xsbti/AnalysisCallback.java.html#53869" title="(source: java.io.File, module: java.io.File, name: java.lang.String)Unit">generatedClass</a><span class="delimiter">(</span><a href="#159401" title="scala.tools.nsc.io.package.JFile">sourceFile</a>, <a href="#163707" title="java.io.File">classFile</a>, <a href="#159333" title="(s: Analyzer.this.global.Symbol, sep: Char, dollarRequired: Boolean)String">className</a><span class="delimiter">(</span><a href="#161151" title="Analyzer.this.global.icodes.global.Symbol">sym</a>, <span title="Char(\'.\')" class="char">'.'</span>, <a href="#163706" title="Boolean">separatorRequired</a><span class="delimiter">)</span><span class="delimiter">)</span>
					<span class="delimiter">}</span>
					<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#161151" title="Analyzer.this.global.icodes.global.Symbol">sym</a>.<span title="=&gt; Boolean">isModuleClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#161151" title="Analyzer.this.global.icodes.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span><span class="delimiter">)</span>
					<span class="delimiter">{</span>
						<span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#159332" title="(sym: Analyzer.this.global.Symbol)Boolean">isTopLevelModule</a><span class="delimiter">(</span><a href="#161151" title="Analyzer.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#161151" title="Analyzer.this.global.icodes.global.Symbol">sym</a>.<span title="=&gt; Analyzer.this.global.icodes.global.Symbol">companionClass</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#159335" title="object Analyzer.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
							<a href="#161152" title="(separatorRequired: Boolean)Unit">addGenerated</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
						<a href="#161152" title="(separatorRequired: Boolean)Unit">addGenerated</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
					<span class="delimiter">}</span>
					<span class="keyword">else</span>
						<a href="#161152" title="(separatorRequired: Boolean)Unit">addGenerated</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
				<span class="delimiter">}</span>
				<a href="CompilerInterface.scala.html#154712" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="xsbti/AnalysisCallback.java.html#53870" title="(sourcePath: java.io.File)Unit">endSource</a><span class="delimiter">(</span><a href="#159401" title="scala.tools.nsc.io.package.JFile">sourceFile</a><span class="delimiter">)</span>
			<span class="delimiter">}</span>
		<span class="delimiter">}</span>
	<span class="delimiter">}</span>

	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="Char(\'.\')" id="159329">classSeparator</a> = <span title="Char(\'.\')" class="char">'.'</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(sym: Analyzer.this.global.Symbol)Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]" id="159330">classFile</a><span class="delimiter">(</span><a title="Analyzer.this.global.Symbol" id="159430">sym</a>: <span title="Analyzer.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>AbstractFile, String, Boolean<span class="delimiter">)</span><span class="delimiter">]</span> =
	<span class="comment">// package can never have a corresponding class file; this test does not</span>
	<span class="comment">// catch package objects (that do not have this flag set)</span>
	<span title="Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#159430" title="Analyzer.this.global.Symbol">sym</a> <span title="(mask: Long)Boolean">hasFlag</span> scala.tools.nsc.symtab.Flags.<span title="Long(16384L)">PACKAGE</span><span class="delimiter">)</span> <span title="object None">None</span> <span class="keyword">else</span>
	<span class="delimiter">{</span>
		<span class="keyword">import</span> scala.tools.nsc.symtab.Flags
		<span class="keyword">val</span> <a title="java.lang.String" id="163726">name</a> = <a href="#159331" title="(s: Analyzer.this.global.Symbol, separator: Char)String">flatname</a><span class="delimiter">(</span><a href="#159430" title="Analyzer.this.global.Symbol">sym</a>, <span title="Char(\'.\')">classSeparator</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#154627" title="(s: Analyzer.this.global.Symbol)String">moduleSuffix</a><span class="delimiter">(</span><a href="#159430" title="Analyzer.this.global.Symbol">sym</a><span class="delimiter">)</span>
		<a href="CompilerInterface.scala.html#154713" title="(name: String)Option[(scala.tools.nsc.io.AbstractFile, Boolean)]">findClass</a><span class="delimiter">(</span><a href="#163726" title="java.lang.String">name</a><span class="delimiter">)</span>.<span title="(f: ((scala.tools.nsc.io.AbstractFile, Boolean)) =&gt; (scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean))Option[(scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean)]">map</span> <a href="#163748" title="(scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean)" class="delimiter">{</a> <span class="keyword">case</span> <span title="(scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean)" class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="163751">file</a>,<a title="Boolean" id="163752">inOut</a><span class="delimiter">)</span> =&gt; <span title="(_1: scala.tools.nsc.io.AbstractFile, _2: java.lang.String, _3: Boolean)(scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean)" class="delimiter">(</span><a href="#163751" title="scala.tools.nsc.io.AbstractFile">file</a>, <a href="#163726" title="java.lang.String">name</a>,<a href="#163752" title="Boolean">inOut</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(alternative: =&gt; Option[(scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean)])Option[(scala.tools.nsc.io.AbstractFile, java.lang.String, Boolean)]">orElse</span> <span class="delimiter">{</span>
			<span title="Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]" class="keyword">if</span><span class="delimiter">(</span><a href="#159332" title="(sym: Analyzer.this.global.Symbol)Boolean">isTopLevelModule</a><span class="delimiter">(</span><a href="#159430" title="Analyzer.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
			<span class="delimiter">{</span>
				<span class="keyword">val</span> <a title="Analyzer.this.global.Symbol" id="163767">linked</a> = <a href="#159430" title="Analyzer.this.global.Symbol">sym</a>.<span title="=&gt; Analyzer.this.global.Symbol">companionClass</span>
				<span title="Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]" class="keyword">if</span><span class="delimiter">(</span><a href="#163767" title="Analyzer.this.global.Symbol">linked</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#159335" title="object Analyzer.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
					<span title="object None">None</span>
				<span class="keyword">else</span>
					<a href="#159330" title="(sym: Analyzer.this.global.Symbol)Option[(scala.tools.nsc.io.AbstractFile, String, Boolean)]">classFile</a><span class="delimiter">(</span><a href="#163767" title="Analyzer.this.global.Symbol">linked</a><span class="delimiter">)</span>
			<span class="delimiter">}</span>
			<span class="keyword">else</span>
				<span title="object None">None</span>
		<span class="delimiter">}</span>
	<span class="delimiter">}</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Analyzer.this.global.Symbol, separator: Char)String" id="159331">flatname</a><span class="delimiter">(</span><a title="Analyzer.this.global.Symbol" id="163727">s</a>: <span title="Analyzer.this.global.Symbol">Symbol</span>, <a title="Char" id="163728">separator</a>: <span title="Char">Char</span><span class="delimiter">)</span> =
		<a href="#159335" title="(ph: scala.tools.nsc.Phase)(op: =&gt; String)String">atPhase</a><span class="delimiter">(</span><a href="#159335" title="=&gt; Analyzer.this.global.Run">currentRun</a>.<span title="=&gt; scala.tools.nsc.Phase">flattenPhase</span>.<span title="=&gt; scala.tools.nsc.Phase">next</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#163727" title="Analyzer.this.global.Symbol">s</a> <span title="(separator: Char)String">fullName</span> <a href="#163728" title="Char">separator</a> <span class="delimiter">}</span>

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Analyzer.this.global.Symbol)Boolean" id="159332">isTopLevelModule</a><span class="delimiter">(</span><a title="Analyzer.this.global.Symbol" id="163716">sym</a>: <span title="Analyzer.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
		<a href="#159335" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a> <span class="delimiter">(</span><a href="#159335" title="=&gt; Analyzer.this.global.Run">currentRun</a>.<span title="=&gt; scala.tools.nsc.Phase">picklerPhase</span>.<span title="=&gt; scala.tools.nsc.Phase">next</span><span class="delimiter">)</span> <span class="delimiter">{</span>
			<a href="#163716" title="Analyzer.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isModuleClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#163716" title="Analyzer.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#163716" title="Analyzer.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isNestedClass</span>
		<span class="delimiter">}</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Analyzer.this.global.Symbol, sep: Char, dollarRequired: Boolean)String" id="159333">className</a><span class="delimiter">(</span><a title="Analyzer.this.global.Symbol" id="163712">s</a>: <span title="Analyzer.this.global.Symbol">Symbol</span>, <a title="Char" id="163713">sep</a>: <span title="Char">Char</span>, <a title="Boolean" id="163714">dollarRequired</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="String">String</span> =
		<a href="#159331" title="(s: Analyzer.this.global.Symbol, separator: Char)String">flatname</a><span class="delimiter">(</span><a href="#163712" title="Analyzer.this.global.Symbol">s</a>, <a href="#163713" title="Char">sep</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#163714" title="Boolean">dollarRequired</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(outputDirectory: java.io.File, s: Analyzer.this.global.Symbol, separatorRequired: Boolean)java.io.File" id="159334">fileForClass</a><span class="delimiter">(</span><a title="java.io.File" id="163708">outputDirectory</a>: <span title="java.io.File">File</span>, <a title="Analyzer.this.global.Symbol" id="163709">s</a>: <span title="Analyzer.this.global.Symbol">Symbol</span>, <a title="Boolean" id="163710">separatorRequired</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="java.io.File">File</span> =
		<span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#163708" title="java.io.File">outputDirectory</a>, <a href="#159333" title="(s: Analyzer.this.global.Symbol, sep: Char, dollarRequired: Boolean)String">className</a><span class="delimiter">(</span><a href="#163709" title="Analyzer.this.global.Symbol">s</a>, <span title="object java.io.File">File</span>.<span title="Char">separatorChar</span>, <a href="#163710" title="Boolean">separatorRequired</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span><span class="delimiter">)</span>
<span class="delimiter">}</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Compat extends java.lang.Object with ScalaObject" id="9973">Compat</a>
<a href="#9973" title="ScalaObject" class="delimiter">{</a>
	<span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="154611">global</a>: <span title="scala.tools.nsc.Global">Global</span>
	<span class="keyword">import</span> <a href="#154611" title="=&gt; scala.tools.nsc.Global">global</a>._
	<span class="keyword">val</span> <a title="Compat.this.global.tpnme.NameType" id="154613">LocalChild</a> = <a href="#154611" title="=&gt; scala.tools.nsc.Global">global</a>.<span title="object Compat.this.global.tpnme">tpnme</span>.<span title="=&gt; Compat.this.global.tpnme.NameType">LOCAL_CHILD</span>
	<span class="keyword">val</span> <a title="Compat.this.global.NullaryMethodType.type" id="154615">Nullary</a> = <a href="#154611" title="=&gt; scala.tools.nsc.Global">global</a>.<span title="object Compat.this.global.NullaryMethodType">NullaryMethodType</span>
	<span class="keyword">val</span> <a title="Compat.this.global.Symbol" id="154617">ScalaObjectClass</a> = <a href="#154611" title="object Compat.this.global.definitions">definitions</a>.<span title="=&gt; Compat.this.global.Symbol">ScalaObjectClass</span>	

	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class MiscCompat extends java.lang.Object with ScalaObject" id="154619">MiscCompat</a>
	<span class="delimiter">{</span>
		<span class="comment">// in 2.9, nme.LOCALCHILD was renamed to tpnme.LOCAL_CHILD</span>
		<span class="keyword">def</span> <a title="=&gt; Compat.this.global.nme.type" id="163789">tpnme</a> = <a href="#154611" title="object Compat.this.global.nme">nme</a>
		<span class="keyword">def</span> <a title="=&gt; Nothing" id="163790">LOCAL_CHILD</a> = <a href="#154629" title="implicit xsbt.Compat.miscCompat : (n: AnyRef)Compat.this.MiscCompat">nme</a>.<a href="#163791" title="=&gt; Nothing">LOCALCHILD</a>
		<span class="keyword">def</span> <a title="=&gt; Nothing" id="163791">LOCALCHILD</a> = <a href="#154628" title="=&gt; Nothing">sourceCompatibilityOnly</a>

		<span class="comment">// in 2.10, ScalaObject was removed</span>
		<span class="keyword">def</span> <a title="=&gt; Compat.this.global.Symbol" id="163792">ScalaObjectClass</a> = <a href="#154611" title="object Compat.this.global.definitions">definitions</a>.<span title="=&gt; Compat.this.global.Symbol">ObjectClass</span>

		<span class="keyword">def</span> <a title="=&gt; Compat.this.NullaryMethodTpe.type" id="163793">NullaryMethodType</a> = <a href="#154620" title="object Compat.this.NullaryMethodTpe">NullaryMethodTpe</a>

		<span class="keyword">def</span> <a title="=&gt; Int" id="163794">MACRO</a> = <a href="#154624" title="=&gt; Int">DummyValue</a>

		<span class="comment">// in 2.10, sym.moduleSuffix exists, but genJVM.moduleSuffix(Symbol) does not</span>
		<span class="keyword">def</span> <a title="(sym: Compat.this.global.Symbol)String" id="163795">moduleSuffix</a><span class="delimiter">(</span><a title="Compat.this.global.Symbol" id="163842">sym</a>: <span title="Compat.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#154628" title="=&gt; Nothing">sourceCompatibilityOnly</a>
		<span class="comment">// in 2.11 genJVM does not exist</span>
		<span class="keyword">def</span> <a title="=&gt; Compat.this.MiscCompat" id="163796">genJVM</a> = <a href="#154619" title="Compat.this.MiscCompat" class="keyword">this</a>
	<span class="delimiter">}</span>
	<span class="comment">// in 2.9, NullaryMethodType was added to Type</span>
	<span class="keyword">object</span> <a title="object Compat.this.NullaryMethodTpe" id="154620">NullaryMethodTpe</a> <span title="ScalaObject" class="delimiter">{</span>
		<span class="keyword">def</span> <a title="(t: Compat.this.global.Type)Option[Compat.this.global.Type]" id="163836">unapply</a><span class="delimiter">(</span><a title="Compat.this.global.Type" id="163862">t</a>: <span title="Compat.this.global.Type">Type</span><span class="delimiter">)</span>: <span title="Option[Compat.this.global.Type]">Option</span><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <span title="object None">None</span>
	<span class="delimiter">}</span>

	<span class="comment">// before 2.10, sym.moduleSuffix doesn't exist, but genJVM.moduleSuffix does</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit xsbt.Compat.symbolCompat : (sym: Compat.this.global.Symbol)Compat.this.SymbolCompat" id="154622">symbolCompat</a><span class="delimiter">(</span><a title="Compat.this.global.Symbol" id="163814">sym</a>: <span title="Compat.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <a href="#154623" title="Compat.this.SymbolCompat">SymbolCompat</a> = <span title="Compat.this.SymbolCompat" class="keyword">new</span> <a href="#154623" title="Compat.this.SymbolCompat">SymbolCompat</a><span class="delimiter">(</span><a href="#163814" title="Compat.this.global.Symbol">sym</a><span class="delimiter">)</span>
	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class SymbolCompat extends java.lang.Object with ScalaObject" id="154623">SymbolCompat</a><a href="#154623" title="ScalaObject" class="delimiter">(</a><a title="Compat.this.global.Symbol" id="164545">sym</a>: <span title="Compat.this.global.Symbol">Symbol</span><span class="delimiter">)</span> <span class="delimiter">{</span>
		<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="163867">moduleSuffix</a> = <a href="#154611" title="=&gt; scala.tools.nsc.Global">global</a>.<span title="object Compat.this.global.genJVM">genJVM</span>.<span title="(sym: Compat.this.global.genJVM.global.Symbol)java.lang.String">moduleSuffix</span><span class="delimiter">(</span><a href="#164545" title="Compat.this.global.Symbol">sym</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>


	<span class="keyword">val</span> <a title="Int" id="154624">DummyValue</a> = <span title="Int(0)" class="int">0</span>
	<span class="keyword">def</span> <a title="(s: Compat.this.global.Symbol)Boolean" id="154626">hasMacro</a><span class="delimiter">(</span><a title="Compat.this.global.Symbol" id="158617">s</a>: <span title="Compat.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="Int" id="164551">MACRO</a> = <a href="#154629" title="implicit xsbt.Compat.miscCompat : (n: AnyRef)Compat.this.MiscCompat">Flags</a>.<a href="#163794" title="=&gt; Int">MACRO</a> <span class="comment">// will be DummyValue for versions before 2.10</span>
		<a href="#164551" title="Int">MACRO</a> <span title="(x: Int)Boolean">!=</span> <a href="#154624" title="=&gt; Int">DummyValue</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#158617" title="Compat.this.global.Symbol">s</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span><a href="#164551" title="=&gt; Long">MACRO</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>
	<span class="keyword">def</span> <a title="(s: Compat.this.global.Symbol)String" id="154627">moduleSuffix</a><span class="delimiter">(</span><a title="Compat.this.global.Symbol" id="163739">s</a>: <span title="Compat.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#154622" title="implicit xsbt.Compat.symbolCompat : (sym: Compat.this.global.Symbol)Compat.this.SymbolCompat">s</a>.<a href="#163867" title="=&gt; java.lang.String">moduleSuffix</a>

	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="154628">sourceCompatibilityOnly</a>: <span title="Nothing">Nothing</span> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.RuntimeException" class="keyword">new</span> <span title="java.lang.RuntimeException">RuntimeException</span><span class="delimiter">(</span><span title="java.lang.String(&quot;For source compatibility only: should not get here.&quot;)" class="string">&quot;For source compatibility only: should not get here.&quot;</span><span class="delimiter">)</span>

	<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit xsbt.Compat.miscCompat : (n: AnyRef)Compat.this.MiscCompat" id="154629">miscCompat</a><span class="delimiter">(</span><a title="AnyRef" id="163816">n</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="#154619" title="Compat.this.MiscCompat">MiscCompat</a> = <span title="Compat.this.MiscCompat" class="keyword">new</span> <a href="#154619" title="Compat.this.MiscCompat">MiscCompat</a>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>