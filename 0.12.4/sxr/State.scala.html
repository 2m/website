<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>State.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

	<span class="keyword">import</span> java.io.File
	<span class="keyword">import</span> java.util.concurrent.Callable

<span class="comment">/**
Data structure representing all command execution information.

@param configuration provides access to the launcher environment, including the application configuration, Scala versions, jvm/filesystem wide locking, and the launcher itself
@param definedCommands the list of command definitions that evaluate command strings.  These may be modified to change the available commands.
@param onFailure the command to execute when another command fails.  `onFailure` is cleared before the failure handling command is executed.
@param remainingCommands the sequence of commands to execute.  This sequence may be modified to change the commands to be executed.  Typically, the `::` and `:::` methods are used to prepend new commands to run.
@param exitHooks code to run before sbt exits, usually to ensure resources are cleaned up.
@param history tracks the recently executed commands
@param attributes custom command state.  It is important to clean up attributes when no longer needed to avoid memory leaks and class loader leaks.
@param next the next action for the command processor to take.  This may be to continue with the next command, adjust global logging, or exit.
*/</span>
<span class="keyword">final</span> case <span class="keyword">class</span> <a title="class State extends java.lang.Object with sbt.Identity with ScalaObject with Product with Serializable" id="335315">State</a><a href="#335315" title="ScalaObject" class="delimiter">(</a>
	<a title="xsbti.AppConfiguration" id="416903">configuration</a>: xsbti.<a href="xsbti/AppConfiguration.java.html#11205" title="xsbti.AppConfiguration">AppConfiguration</a>,
	<a title="Seq[sbt.Command]" id="416904">definedCommands</a>: <span title="Seq[sbt.Command]">Seq</span><span class="delimiter">[</span>Command<span class="delimiter">]</span>,
	<a title="Set[sbt.ExitHook]" id="416905">exitHooks</a>: <span title="Set[sbt.ExitHook]">Set</span><span class="delimiter">[</span>ExitHook<span class="delimiter">]</span>,
	<a title="Option[String]" id="416906">onFailure</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
	<a title="Seq[String]" id="416907">remainingCommands</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span>,
	<a title="sbt.State.History" id="416908">history</a>: State.<a href="#335310" title="sbt.State.History">History</a>,
	<a title="sbt.AttributeMap" id="416909">attributes</a>: <a href="Attributes.scala.html#12467" title="sbt.AttributeMap">AttributeMap</a>,
	<a title="sbt.GlobalLogging" id="416910">globalLogging</a>: <a href="GlobalLogging.scala.html#13070" title="sbt.GlobalLogging">GlobalLogging</a>,
	<a title="sbt.State.Next" id="416911">next</a>: State.<a href="#335302" title="sbt.State.Next">Next</a>
<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#12064" title="sbt.Identity">Identity</a> <span class="delimiter">{</span>
	<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="sbt.complete.Parser[() =&gt; sbt.State]" id="334478">combinedParser</a> = <a href="Command.scala.html#12002" title="object sbt.Command">Command</a>.<a href="Command.scala.html#332094" title="(cmds: Seq[sbt.Command])sbt.State =&gt; sbt.complete.Parser[() =&gt; sbt.State]">combine</a><span title="(v1: sbt.State)sbt.complete.Parser[() =&gt; sbt.State]" class="delimiter">(</span><a href="#416904" title="=&gt; Seq[sbt.Command]">definedCommands</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#335315" title="sbt.State" class="keyword">this</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait Identity extends java.lang.Object with ScalaObject" id="12064">Identity</a> <span title="ScalaObject" class="delimiter">{</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Int" id="334446">hashCode</a> = <a href="#12064" title="sbt.Identity" class="keyword">super</a>.<span title="()Int">hashCode</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(a: Any)Boolean" id="334447">equals</a><span class="delimiter">(</span><a title="Any" id="2115969">a</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#12064" title="sbt.Identity" class="keyword">super</a>.<span title="(x$1: Any)Boolean">equals</span><span class="delimiter">(</span><a href="#2115969" title="Any">a</a><span class="delimiter">)</span>
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()java.lang.String" id="334448">toString</a> = <a href="#12064" title="sbt.Identity" class="keyword">super</a>.<span title="()java.lang.String">toString</span>
<span class="delimiter">}</span>

<span class="comment">/** StateOps methods to be merged at the next binary incompatible release. */</span>
<span class="keyword">private</span><span class="delimiter">[</span>sbt<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait NewStateOps extends java.lang.Object" id="12065">NewStateOps</a>
<span title="java.lang.Object" class="delimiter">{</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="335356">interactive</a>: <span title="Boolean">Boolean</span>
	<span class="keyword">def</span> <a title="(flag: Boolean)sbt.State" id="335357">setInteractive</a><span class="delimiter">(</span><a title="Boolean" id="421231">flag</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
<span class="delimiter">}</span>

<span class="comment">/** Convenience methods for State transformations and operations. */</span>
<span class="keyword">trait</span> <a title="trait StateOps extends java.lang.Object" id="12066">StateOps</a> <span title="java.lang.Object" class="delimiter">{</span>
	<span class="keyword">def</span> <a title="(f: (String, sbt.State) =&gt; sbt.State)sbt.State" id="335320">process</a><span class="delimiter">(</span><a title="(String, sbt.State) =&gt; sbt.State" id="2115896">f</a>: <span class="delimiter">(</span>String, State<span class="delimiter">)</span> =&gt; State<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Schedules `commands` to be run before any remaining commands.*/</span>
	<span class="keyword">def</span> <a title="(commands: Seq[String])sbt.State" id="335321">:::</a> <span class="delimiter">(</span><a title="Seq[String]" id="335353">commands</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Schedules `command` to be run before any remaining commands.*/</span>
	<span class="keyword">def</span> <a title="(command: String)sbt.State" id="335322">::</a> <span class="delimiter">(</span><a title="String" id="348758">command</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Sets the next command processing action to be to continue processing the next command.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.State" id="335323">continue</a>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Reboots sbt.  A reboot restarts execution from the entry point of the launcher.
	* A reboot is designed to be as close as possible to actually restarting the JVM without actually doing so.
	* Because the JVM is not restarted, JVM exit hooks are not run.
	* State.exitHooks should be used instead and those will be run before rebooting.
	* If `full` is true, the boot directory is deleted before starting again.
	* This command is currently implemented to not return, but may be implemented in the future to only reboot at the next command processing step. */</span>
	<span class="keyword">def</span> <a title="(full: Boolean)sbt.State" id="335324">reboot</a><span class="delimiter">(</span><a title="Boolean" id="418583">full</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Sets the next command processing action to do.*/</span>
	<span class="keyword">def</span> <a title="(n: sbt.State.Next)sbt.State" id="335325">setNext</a><span class="delimiter">(</span><a title="sbt.State.Next" id="2115985">n</a>: State.<a href="#335302" title="sbt.State.Next">Next</a><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	@deprecated<span class="delimiter">(</span><span class="string">&quot;Use setNext&quot;</span>, <span class="string">&quot;0.11.0&quot;</span><span class="delimiter">)</span> <span class="keyword">def</span> <a title="(ro: Option[xsbti.MainResult])sbt.State" id="335326">setResult</a><span class="delimiter">(</span><a title="Option[xsbti.MainResult]" id="2115986">ro</a>: <span title="Option[xsbti.MainResult]">Option</span><span class="delimiter">[</span>xsbti.MainResult<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Restarts sbt without dropping loaded Scala classes.  It is a shallower restart than `reboot`.
	* This method takes a snapshot of the remaining commands and will resume executing those commands after reload.
	* This means that any commands added to this State will be dropped.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.State" id="335327">reload</a>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Sets the next command processing action to be to rotate the global log and continue executing commands.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.State" id="335328">clearGlobalLog</a>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Sets the next command processing action to be to keep the previous log and continue executing commands.  */</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.State" id="335329">keepLastLog</a>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Sets the next command processing action to be to exit with a zero exit code if `ok` is true and a nonzero exit code if `ok` if false.*/</span>
	<span class="keyword">def</span> <a title="(ok: Boolean)sbt.State" id="335330">exit</a><span class="delimiter">(</span><a title="Boolean" id="417329">ok</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Marks the currently executing command as failing.  This triggers failure handling by the command processor.  See also `State.onFailure`*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.State" id="335331">fail</a>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Schedules `newCommands` to be run after any remaining commands. */</span>
	<span class="keyword">def</span> <a title="(newCommands: Seq[sbt.Command])sbt.State" id="335332">++</a> <span class="delimiter">(</span><a title="Seq[sbt.Command]" id="416280">newCommands</a>: <span title="Seq[sbt.Command]">Seq</span><span class="delimiter">[</span>Command<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Schedules `newCommand` to be run after any remaining commands. */</span>
	<span class="keyword">def</span> <a title="(newCommand: sbt.Command)sbt.State" id="335333">+</a> <span class="delimiter">(</span><a title="sbt.Command" id="2115987">newCommand</a>: <a href="Command.scala.html#11999" title="sbt.Command">Command</a><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>

	<span class="comment">/** Gets the value associated with `key` from the custom attributes map.*/</span>
	<span class="keyword">def</span> <a title="[T](key: sbt.AttributeKey[T])Option[T]" id="335334">get</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="335336">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.AttributeKey[T]" id="336060">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[T]">AttributeKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span>
	<span class="comment">/** Sets the value associated with `key` in the custom attributes map.*/</span>
	<span class="keyword">def</span> <a title="[T](key: sbt.AttributeKey[T], value: T)sbt.State" id="335337">put</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="335339">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.AttributeKey[T]" id="420930">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[T]">AttributeKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="T" id="420931">value</a>: <a href="#335339" title="T">T</a><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Removes the `key` and any associated value from the custom attributes map.*/</span>
	<span class="keyword">def</span> <a title="(key: sbt.AttributeKey[_])sbt.State" id="335340">remove</a><span class="delimiter">(</span><a title="sbt.AttributeKey[_]" id="420913">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[_]">AttributeKey</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Sets the value associated with `key` in the custom attributes map by transforming the current value.*/</span>
	<span class="keyword">def</span> <a title="[T](key: sbt.AttributeKey[T])(f: Option[T] =&gt; T)sbt.State" id="335341">update</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="335343">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.AttributeKey[T]" id="420773">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[T]">AttributeKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Option[T] =&gt; T" id="420774">f</a>: Option<span class="delimiter">[</span>T<span class="delimiter">]</span> =&gt; T<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Returns true if `key` exists in the custom attributes map, false if it does not exist.*/</span>
	<span class="keyword">def</span> <a title="(key: sbt.AttributeKey[_])Boolean" id="335344">has</a><span class="delimiter">(</span><a title="sbt.AttributeKey[_]" id="425269">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[_]">AttributeKey</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span>

	<span class="comment">/** The application base directory, which is not necessarily the current working directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="335345">baseDir</a>: <span title="java.io.File">File</span>

	<span class="comment">/** The Logger used for general command logging.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="335346">log</a>: <a href="Logger.scala.html#13103" title="sbt.Logger">Logger</a>

	<span class="comment">/** Evaluates the provided expression with a JVM-wide and machine-wide lock on `file`.*/</span>
	<span class="keyword">def</span> <a title="[T](file: java.io.File)(t: =&gt; T)T" id="335347">locked</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="335349">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.io.File" id="2115990">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="2115991">t</a>: =&gt; T<span class="delimiter">)</span>: <a href="#335349" title="T">T</a>

	<span class="comment">/** Runs any defined exitHooks and then clears them.*/</span>
	<span class="keyword">def</span> <a title="()sbt.State" id="335350">runExitHooks</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
	<span class="comment">/** Registers a new exit hook, which will run when sbt exits or restarts.*/</span>
	<span class="keyword">def</span> <a title="(f: =&gt; Unit)sbt.State" id="335351">addExitHook</a><span class="delimiter">(</span><a title="=&gt; Unit" id="2115993">f</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object sbt.State" id="2116783">State</a>
<span title="ScalaObject" class="delimiter">{</span>
	<span class="comment">/** Indicates where command execution should resume after a failure.*/</span>
	<span class="keyword">final</span> <span class="keyword">val</span> <a title="java.lang.String(&quot;---&quot;)" id="335300">FailureWall</a> = <span title="java.lang.String(&quot;---&quot;)" class="string">&quot;---&quot;</span>

	<span class="comment">/** Represents the next action for the command processor.*/</span>
	<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait Next extends java.lang.Object" id="335302">Next</a>
	<span class="comment">/** Indicates that the command processor should process the next command.*/</span>
	<span class="keyword">object</span> <a title="object sbt.State.Continue" id="335303">Continue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#335302" title="sbt.State.Next">Next</a>
	<span class="comment">/** Indicates that the application should exit with the given result.*/</span>
	<span class="keyword">final</span> <span class="keyword">class</span> <a title="class Return extends java.lang.Object with sbt.State.Next with ScalaObject" id="335305">Return</a><a href="#335305" title="ScalaObject" class="delimiter">(</a><span class="keyword">val</span> <a title="xsbti.MainResult" id="2115999">result</a>: xsbti.<a href="xsbti/MainResult.java.html#11256" title="xsbti.MainResult">MainResult</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#335302" title="sbt.State.Next">Next</a>
	<span class="comment">/** Indicates that global logging should be rotated.*/</span>
	<span class="keyword">final</span> <span class="keyword">object</span> <a title="object sbt.State.ClearGlobalLog" id="335306">ClearGlobalLog</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#335302" title="sbt.State.Next">Next</a>
	<span class="comment">/** Indicates that the previous log file should be preserved instead of discarded.*/</span>
	<span class="keyword">final</span> <span class="keyword">object</span> <a title="object sbt.State.KeepLastLog" id="335308">KeepLastLog</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#335302" title="sbt.State.Next">Next</a>

	<span class="comment">/** Provides a list of recently executed commands.  The commands are stored as processed instead of as entered by the user.
	* @param executed the list of the most recently executed commands, with the most recent command first.
	* @param maxSize the maximum number of commands to keep, or 0 to keep an unlimited number. */</span>
	<span class="keyword">final</span> <span class="keyword">class</span> <a title="class History extends java.lang.Object with ScalaObject" id="335310">History</a> <a href="#335310" title="ScalaObject" class="keyword">private</a><span class="delimiter">[</span>State<span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">val</span> <a title="Seq[String]" id="416943">executed</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <span class="keyword">val</span> <a title="Int" id="416944">maxSize</a>: <span title="Int">Int</span><span class="delimiter">)</span>
	<span class="delimiter">{</span>
		<span class="comment">/** Adds `command` as the most recently executed command.*/</span>
		<span class="keyword">def</span> <a title="(command: String)sbt.State.History" id="416939">::</a> <span class="delimiter">(</span><a title="String" id="2116005">command</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#335310" title="sbt.State.History">History</a> =
		<span class="delimiter">{</span>
			<span class="keyword">val</span> <a title="Seq[String]" id="2116007">prependTo</a> = <span title="Seq[String]" class="keyword">if</span><span class="delimiter">(</span><a href="#416944" title="=&gt; Int">maxSize</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#416943" title="=&gt; Seq[String]">executed</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;=</span> <a href="#416944" title="=&gt; Int">maxSize</a><span class="delimiter">)</span> <a href="#416943" title="=&gt; Seq[String]">executed</a>.<span title="(n: Int)Seq[String]">take</span><span class="delimiter">(</span><a href="#416944" title="=&gt; Int">maxSize</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#416943" title="=&gt; Seq[String]">executed</a>
			<span title="sbt.State.History" class="keyword">new</span> <a href="#335310" title="sbt.State.History">History</a><span class="delimiter">(</span><a href="#2116005" title="String">command</a> <a href="#2116022" title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">+:</a> <a href="#2116007" title="Seq[String]">prependTo</a>, <a href="#416944" title="=&gt; Int">maxSize</a><span class="delimiter">)</span>
		<span class="delimiter">}</span>
		<span class="comment">/** Changes the maximum number of commands kept, adjusting the current history if necessary.*/</span>
		<span class="keyword">def</span> <a title="(size: Int)sbt.State.History" id="416940">setMaxSize</a><span class="delimiter">(</span><a title="Int" id="2116059">size</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#335310" title="sbt.State.History">History</a> =
			<span title="sbt.State.History" class="keyword">new</span> <a href="#335310" title="sbt.State.History">History</a><span class="delimiter">(</span><span title="Seq[String]" class="keyword">if</span><span class="delimiter">(</span><a href="#2116059" title="Int">size</a> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#416943" title="=&gt; Seq[String]">executed</a> <span class="keyword">else</span> <a href="#416943" title="=&gt; Seq[String]">executed</a>.<span title="(n: Int)Seq[String]">take</span><span class="delimiter">(</span><a href="#2116059" title="Int">size</a><span class="delimiter">)</span>, <a href="#2116059" title="Int">size</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="=&gt; String" id="416941">current</a>: <span title="String">String</span> = <a href="#416943" title="=&gt; Seq[String]">executed</a>.<span title="=&gt; String">head</span>
		<span class="keyword">def</span> <a title="=&gt; Option[String]" id="416942">previous</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="#416943" title="=&gt; Seq[String]">executed</a>.<span title="(n: Int)Seq[String]">drop</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="=&gt; Option[String]">headOption</span>
	<span class="delimiter">}</span>
	<span class="comment">/** Constructs an empty command History with a default, finite command limit.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.State.History" id="335311">newHistory</a> = <span title="sbt.State.History" class="keyword">new</span> <a href="#335310" title="sbt.State.History">History</a><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>, complete.<a href="HistoryCommands.scala.html#12686" title="object sbt.complete.HistoryCommands">HistoryCommands</a>.<a href="HistoryCommands.scala.html#417112" title="=&gt; Int">MaxLines</a><span class="delimiter">)</span>

	<span class="keyword">def</span> <a title="(state: sbt.State)sbt.Reboot" id="335312">defaultReload</a><span class="delimiter">(</span><a title="sbt.State" id="2116067">state</a>: <a href="#335315" title="sbt.State">State</a><span class="delimiter">)</span>: <a href="MainControl.scala.html#12043" title="sbt.Reboot">Reboot</a> =
	<span class="delimiter">{</span>
		<span class="keyword">val</span> <a title="xsbti.AppProvider" id="2116069">app</a> = <a href="#2116067" title="sbt.State">state</a>.<a href="#416903" title="=&gt; xsbti.AppConfiguration">configuration</a>.<a href="xsbti/AppConfiguration.java.html#313282" title="()xsbti.AppProvider">provider</a>
		<span title="sbt.Reboot" class="keyword">new</span> <a href="MainControl.scala.html#12043" title="sbt.Reboot">Reboot</a><span class="delimiter">(</span><a href="#2116069" title="xsbti.AppProvider">app</a>.<a href="xsbti/AppProvider.java.html#313262" title="()xsbti.ScalaProvider">scalaProvider</a>.<a href="xsbti/ScalaProvider.java.html#313497" title="()java.lang.String">version</a>, <a href="#2116067" title="sbt.State">state</a>.<a href="#416907" title="=&gt; Seq[String]">remainingCommands</a>, <a href="#2116069" title="xsbti.AppProvider">app</a>.<a href="xsbti/AppProvider.java.html#313263" title="()xsbti.ApplicationID">id</a>, <a href="#2116067" title="sbt.State">state</a>.<a href="#416903" title="=&gt; xsbti.AppConfiguration">configuration</a>.<a href="xsbti/AppConfiguration.java.html#313281" title="()java.io.File">baseDirectory</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>

	<span class="keyword">private</span><span class="delimiter">[</span>sbt<span class="delimiter">]</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sbt.State.newStateOps : (s: sbt.State)sbt.NewStateOps" id="335313">newStateOps</a><span class="delimiter">(</span><a title="sbt.State" id="335354">s</a>: <a href="#335315" title="sbt.State">State</a><span class="delimiter">)</span>: <a href="#12065" title="sbt.NewStateOps">NewStateOps</a> = <a href="#2116070" title="java.lang.Object with sbt.NewStateOps" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with sbt.NewStateOps" id="2116070">NewStateOps</a> <span class="delimiter">{</span>
		<span class="keyword">def</span> <a title="=&gt; Boolean" id="2116074">interactive</a> = <a href="#335314" title="implicit sbt.State.stateOps : (s: sbt.State)sbt.StateOps">s</a>.<a href="#335334" title="(key: sbt.AttributeKey[Boolean])Option[Boolean]">get</a><span class="delimiter">(</span><a href="BasicKeys.scala.html#11991" title="object sbt.BasicKeys">BasicKeys</a>.<a href="BasicKeys.scala.html#358307" title="=&gt; sbt.AttributeKey[Boolean]">interactive</a><span class="delimiter">)</span>.<span title="(default: =&gt; Boolean)Boolean">getOrElse</span><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(i: Boolean)sbt.State" id="2116075">setInteractive</a><span class="delimiter">(</span><a title="Boolean" id="2116089">i</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = <a href="#335314" title="implicit sbt.State.stateOps : (s: sbt.State)sbt.StateOps">s</a>.<a href="#335337" title="(key: sbt.AttributeKey[Boolean], value: Boolean)sbt.State">put</a><span class="delimiter">(</span><a href="BasicKeys.scala.html#11991" title="object sbt.BasicKeys">BasicKeys</a>.<a href="BasicKeys.scala.html#358307" title="=&gt; sbt.AttributeKey[Boolean]">interactive</a>, <a href="#2116089" title="Boolean">i</a><span class="delimiter">)</span>
	<span class="delimiter">}</span>

	<span class="comment">/** Provides operations and transformations on State. */</span>
	<span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sbt.State.stateOps : (s: sbt.State)sbt.StateOps" id="335314">stateOps</a><span class="delimiter">(</span><a title="sbt.State" id="335318">s</a>: <a href="#335315" title="sbt.State">State</a><span class="delimiter">)</span>: <a href="#12066" title="sbt.StateOps">StateOps</a> = <a href="#2116101" title="java.lang.Object with sbt.StateOps{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with sbt.StateOps" id="2116101">StateOps</a> <span class="delimiter">{</span>
		<span class="keyword">def</span> <a title="(f: (String, sbt.State) =&gt; sbt.State)sbt.State" id="2116105">process</a><span class="delimiter">(</span><a title="(String, sbt.State) =&gt; sbt.State" id="2116138">f</a>: <span class="delimiter">(</span>String, State<span class="delimiter">)</span> =&gt; State<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> =
			<a href="#335318" title="sbt.State">s</a>.<a href="#416907" title="=&gt; Seq[String]">remainingCommands</a> <span title="sbt.State" class="keyword">match</span> <span class="delimiter">{</span>
				<span class="keyword">case</span> <a href="#2116341" title="sbt.State">Seq</a><span class="delimiter">(</span><a title="String" id="2116352">x</a>, <a title="Seq[String]" id="2116353">xs</a> @ _*<span class="delimiter">)</span> =&gt; <a href="#2116138" title="(v1: String, v2: sbt.State)sbt.State">f</a><span class="delimiter">(</span><a href="#2116352" title="String">x</a>, <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116365">copy</a><span class="delimiter">(</span>remainingCommands = <a href="#2116353" title="Seq[String]" id="2116357">xs</a>, history = <a href="#2116352" title="String">x</a> <a href="#416939" title="sbt.State.History" id="2116358">::</a> <a href="#335318" title="sbt.State">s</a>.<a href="#416908" title="=&gt; sbt.State.History">history</a><span class="delimiter">)</span><span class="delimiter">)</span>
				<span class="keyword">case</span> <a href="#2116367" title="sbt.State">Seq</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#2116118" title="(ok: Boolean)sbt.State">exit</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
			<span class="delimiter">}</span>
			<a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116391">copy</a><span class="delimiter">(</span>remainingCommands = <a href="#335318" title="sbt.State">s</a>.<a href="#416907" title="=&gt; Seq[String]">remainingCommands</a>.<span title="(n: Int)Seq[String]">drop</span><a title="Seq[String]" id="2116383" class="delimiter">(</a><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(newCommands: Seq[String])sbt.State" id="2116106">:::</a> <span class="delimiter">(</span><a title="Seq[String]" id="2116140">newCommands</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> = <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116436">copy</a><span class="delimiter">(</span>remainingCommands = <a href="#2116140" title="Seq[String]">newCommands</a> <a title="Seq[String]" id="2116428">++</a> <a href="#335318" title="sbt.State">s</a>.<a href="#416907" title="=&gt; Seq[String]">remainingCommands</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(command: String)sbt.State" id="2116107">::</a> <span class="delimiter">(</span><a title="String" id="2116142">command</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> = <span class="delimiter">(</span><a href="#2116142" title="String">command</a> <a href="#2116443" title="(x: String)List[String]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span> <a href="#2116106" title="(newCommands: Seq[String])sbt.State">:::</a> <a href="#2116101" title="this.type" class="keyword">this</a>
		<span class="keyword">def</span> <a title="(newCommands: Seq[sbt.Command])sbt.State" id="2116108">++</a> <span class="delimiter">(</span><a title="Seq[sbt.Command]" id="2116144">newCommands</a>: <span title="Seq[sbt.Command]">Seq</span><span class="delimiter">[</span>Command<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> = <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116501">copy</a><span class="delimiter">(</span>definedCommands = <span class="delimiter">(</span><a href="#335318" title="sbt.State">s</a>.<a href="#416904" title="=&gt; Seq[sbt.Command]">definedCommands</a> <span title="(that: scala.collection.GenTraversableOnce[sbt.Command])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.Command],sbt.Command,Seq[sbt.Command]])Seq[sbt.Command]">++</span> <a href="#2116144" title="Seq[sbt.Command]">newCommands</a><span class="delimiter">)</span>.<a title="Seq[sbt.Command]" id="2116493">distinct</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(newCommand: sbt.Command)sbt.State" id="2116109">+</a> <span class="delimiter">(</span><a title="sbt.Command" id="2116146">newCommand</a>: <a href="Command.scala.html#11999" title="sbt.Command">Command</a><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> = <a href="#2116101" title="this.type" class="keyword">this</a> <a href="#2116108" title="(newCommands: Seq[sbt.Command])sbt.State">++</a> <span class="delimiter">(</span><a href="#2116146" title="sbt.Command">newCommand</a> <a href="#2116507" title="(x: sbt.Command)List[sbt.Command]">::</a> <span title="object Nil">Nil</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="=&gt; java.io.File" id="2116110">baseDir</a>: <span title="java.io.File">File</span> = <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="=&gt; xsbti.AppConfiguration">configuration</a>.<a href="xsbti/AppConfiguration.java.html#313281" title="()java.io.File">baseDirectory</a>
		<span class="keyword">def</span> <a title="(n: sbt.State.Next)sbt.State" id="2116111">setNext</a><span class="delimiter">(</span><a title="sbt.State.Next" id="2116150">n</a>: <a href="#335302" title="sbt.State.Next">Next</a><span class="delimiter">)</span> = <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116161">copy</a><span class="delimiter">(</span>next = <a href="#2116150" title="sbt.State.Next" id="2116153">n</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(ro: Option[xsbti.MainResult])sbt.State" id="2116112">setResult</a><span class="delimiter">(</span><a title="Option[xsbti.MainResult]" id="2116162">ro</a>: <span title="Option[xsbti.MainResult]">Option</span><span class="delimiter">[</span>xsbti.MainResult<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#2116162" title="Option[xsbti.MainResult]">ro</a> <span title="sbt.State" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="sbt.State">None</span> =&gt; <a href="#2116113" title="=&gt; sbt.State">continue</a>; <span class="keyword">case</span> <span title="sbt.State">Some</span><span class="delimiter">(</span><a title="xsbti.MainResult" id="2116169">r</a><span class="delimiter">)</span> =&gt; <a href="#2116111" title="(n: sbt.State.Next)sbt.State">setNext</a><span class="delimiter">(</span><span title="sbt.State.Return" class="keyword">new</span> <a href="#335305" title="sbt.State.Return">Return</a><span class="delimiter">(</span><a href="#2116169" title="xsbti.MainResult">r</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
		<span class="keyword">def</span> <a title="=&gt; sbt.State" id="2116113">continue</a> = <a href="#2116111" title="(n: sbt.State.Next)sbt.State">setNext</a><span class="delimiter">(</span><a href="#335303" title="object sbt.State.Continue">Continue</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(full: Boolean)Nothing" id="2116114">reboot</a><span class="delimiter">(</span><a title="Boolean" id="2116170">full</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> =<span class="delimiter">{</span> <a href="#2116134" title="()sbt.State">runExitHooks</a><span class="delimiter">(</span><span class="delimiter">)</span>; <span title="Nothing" class="keyword">throw</span> <a href="xsbti/FullReload.java.html#304446" title="(arguments: Array[java.lang.String], clean: Boolean)xsbti.FullReload" class="keyword">new</a> xsbti.<a href="xsbti/FullReload.java.html#11236" title="xsbti.FullReload">FullReload</a><span class="delimiter">(</span><a href="#335318" title="sbt.State">s</a>.<a href="#416907" title="=&gt; Seq[String]">remainingCommands</a>.<span title="(implicit evidence$1: ClassManifest[String])Array[String]">toArray</span>, <a href="#2116170" title="Boolean">full</a><span class="delimiter">)</span> <span class="delimiter">}</span>
		<span class="keyword">def</span> <a title="=&gt; sbt.State" id="2116115">reload</a> = <a href="#2116134" title="()sbt.State">runExitHooks</a><a href="#335314" title="implicit sbt.State.stateOps : (s: sbt.State)sbt.StateOps" class="delimiter">(</a><span class="delimiter">)</span>.<a href="#335325" title="(n: sbt.State.Next)sbt.State">setNext</a><span class="delimiter">(</span><span title="sbt.State.Return" class="keyword">new</span> <a href="#335305" title="sbt.State.Return">Return</a><span class="delimiter">(</span><a href="#335312" title="(state: sbt.State)sbt.Reboot">defaultReload</a><span class="delimiter">(</span><a href="#335318" title="sbt.State">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="=&gt; sbt.State" id="2116116">clearGlobalLog</a> = <a href="#2116111" title="(n: sbt.State.Next)sbt.State">setNext</a><span class="delimiter">(</span><a href="#335306" title="object sbt.State.ClearGlobalLog">ClearGlobalLog</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="=&gt; sbt.State" id="2116117">keepLastLog</a> = <a href="#2116111" title="(n: sbt.State.Next)sbt.State">setNext</a><span class="delimiter">(</span><a href="#335308" title="object sbt.State.KeepLastLog">KeepLastLog</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(ok: Boolean)sbt.State" id="2116118">exit</a><span class="delimiter">(</span><a title="Boolean" id="2116207">ok</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> = <a href="#2116134" title="()sbt.State">runExitHooks</a><a href="#335314" title="implicit sbt.State.stateOps : (s: sbt.State)sbt.StateOps" class="delimiter">(</a><span class="delimiter">)</span>.<a href="#335325" title="(n: sbt.State.Next)sbt.State">setNext</a><span class="delimiter">(</span><span title="sbt.State.Return" class="keyword">new</span> <a href="#335305" title="sbt.State.Return">Return</a><span class="delimiter">(</span><a href="MainControl.scala.html#2115282" title="(code: Int)sbt.Exit">Exit</a><span class="delimiter">(</span><span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#2116207" title="Boolean">ok</a><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="[T](key: sbt.AttributeKey[T])Option[T]" id="2116119">get</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="2116121">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.AttributeKey[T]" id="2116213">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[T]">AttributeKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#335318" title="sbt.State">s</a>.<a href="#416909" title="=&gt; sbt.AttributeMap">attributes</a> <a href="Attributes.scala.html#332191" title="(k: sbt.AttributeKey[T])Option[T]">get</a> <a href="#2116213" title="sbt.AttributeKey[T]">key</a>
		<span class="keyword">def</span> <a title="[T](key: sbt.AttributeKey[T], value: T)sbt.State" id="2116122">put</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="2116124">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.AttributeKey[T]" id="2116226">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[T]">AttributeKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="T" id="2116227">value</a>: <a href="#2116124" title="T">T</a><span class="delimiter">)</span> = <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116253">copy</a><span class="delimiter">(</span>attributes = <a href="#335318" title="sbt.State">s</a>.<a href="#416909" title="=&gt; sbt.AttributeMap">attributes</a>.<a href="Attributes.scala.html#332200" title="(k: sbt.AttributeKey[T], value: T)sbt.AttributeMap">put</a><a title="sbt.AttributeMap" id="2116245" class="delimiter">(</a><a href="#2116226" title="sbt.AttributeKey[T]">key</a>, <a href="#2116227" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="[T](key: sbt.AttributeKey[T])(f: Option[T] =&gt; T)sbt.State" id="2116125">update</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="2116127">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.AttributeKey[T]" id="2116258">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[T]">AttributeKey</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Option[T] =&gt; T" id="2116259">f</a>: Option<span class="delimiter">[</span>T<span class="delimiter">]</span> =&gt; T<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> = <a href="#2116122" title="(key: sbt.AttributeKey[T], value: T)sbt.State">put</a><span class="delimiter">(</span><a href="#2116258" title="sbt.AttributeKey[T]">key</a>, <a href="#2116259" title="(v1: Option[T])T">f</a><span class="delimiter">(</span><a href="#2116119" title="(key: sbt.AttributeKey[T])Option[T]">get</a><span class="delimiter">(</span><a href="#2116258" title="sbt.AttributeKey[T]">key</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="(key: sbt.AttributeKey[_])Boolean" id="2116128">has</a><span class="delimiter">(</span><a title="sbt.AttributeKey[_]" id="2116269">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[_]">AttributeKey</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#335318" title="sbt.State">s</a>.<a href="#416909" title="=&gt; sbt.AttributeMap">attributes</a> <a href="Attributes.scala.html#332197" title="(k: sbt.AttributeKey[_$3])Boolean">contains</a> <a href="#2116269" title="sbt.AttributeKey[_]">key</a>
		<span class="keyword">def</span> <a title="(key: sbt.AttributeKey[_])sbt.State" id="2116129">remove</a><span class="delimiter">(</span><a title="sbt.AttributeKey[_]" id="2116278">key</a>: <a href="Attributes.scala.html#12461" title="sbt.AttributeKey[_]">AttributeKey</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116295">copy</a><span class="delimiter">(</span>attributes = <a href="#335318" title="sbt.State">s</a>.<a href="#416909" title="=&gt; sbt.AttributeMap">attributes</a> <a href="Attributes.scala.html#332194" title="sbt.AttributeMap" id="2116287">remove</a> <a href="#2116278" title="sbt.AttributeKey[_]">key</a><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="2116130">log</a> = <a href="#335318" title="sbt.State">s</a>.<a href="#416910" title="=&gt; sbt.GlobalLogging">globalLogging</a>.<a href="GlobalLogging.scala.html#347507" title="=&gt; sbt.Logger">full</a>
		<span class="keyword">def</span> <a title="=&gt; sbt.State" id="2116131">fail</a> =
		<span class="delimiter">{</span>
			<span class="keyword">val</span> <a title="Seq[String]" id="2116302">remaining</a> = <a href="#335318" title="sbt.State">s</a>.<a href="#416907" title="=&gt; Seq[String]">remainingCommands</a>.<span title="(p: String =&gt; Boolean)Seq[String]">dropWhile</span><span class="delimiter">(</span><a href="#2116306" title="String">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="java.lang.String(&quot;---&quot;)">FailureWall</span><span class="delimiter">)</span>
			<span title="sbt.State" class="keyword">if</span><span class="delimiter">(</span><a href="#2116302" title="Seq[String]">remaining</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
				<a href="#2116132" title="(s: sbt.State, remaining: Seq[String], noHandler: =&gt; sbt.State)sbt.State">applyOnFailure</a><span class="delimiter">(</span><a href="#335318" title="sbt.State">s</a>, <span title="object Nil">Nil</span>, <a href="#2116118" title="(ok: Boolean)sbt.State">exit</a><span class="delimiter">(</span>ok = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
			<span class="keyword">else</span>
				<a href="#2116132" title="(s: sbt.State, remaining: Seq[String], noHandler: =&gt; sbt.State)sbt.State">applyOnFailure</a><span class="delimiter">(</span><a href="#335318" title="sbt.State">s</a>, <a href="#2116302" title="Seq[String]">remaining</a>, <a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116323">copy</a><span class="delimiter">(</span>remainingCommands = <a href="#2116302" title="Seq[String]" id="2116315">remaining</a><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="delimiter">}</span>
		<span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(s: sbt.State, remaining: Seq[String], noHandler: =&gt; sbt.State)sbt.State" id="2116132">applyOnFailure</a><span class="delimiter">(</span><a title="sbt.State" id="2116311">s</a>: <a href="#335315" title="sbt.State">State</a>, <a title="Seq[String]" id="2116312">remaining</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="=&gt; sbt.State" id="2116313">noHandler</a>: =&gt; State<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> =
			<a href="#2116311" title="sbt.State">s</a>.<a href="#416906" title="=&gt; Option[String]">onFailure</a> <span title="sbt.State" class="keyword">match</span>
			<span class="delimiter">{</span>
				<span class="keyword">case</span> <span title="sbt.State">Some</span><span class="delimiter">(</span><a title="String" id="2116616">c</a><span class="delimiter">)</span> =&gt; <a href="#2116311" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116662">copy</a><span class="delimiter">(</span>remainingCommands = <a href="#2116616" title="String">c</a> <a href="#2116617" title="Seq[String]" id="2116654">+:</a> <a href="#2116312" title="Seq[String]">remaining</a>, onFailure = <a title="None.type" id="2116655">None</a><span class="delimiter">)</span>
				<span class="keyword">case</span> <span title="sbt.State">None</span> =&gt; <a href="#2116313" title="=&gt; sbt.State">noHandler</a>
			<span class="delimiter">}</span>

		<span class="keyword">def</span> <a title="(act: =&gt; Unit)sbt.State" id="2116133">addExitHook</a><span class="delimiter">(</span><a title="=&gt; Unit" id="2116324">act</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> =
			<a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116688">copy</a><span class="delimiter">(</span>exitHooks = <a href="#335318" title="sbt.State">s</a>.<a href="#416905" title="=&gt; Set[sbt.ExitHook]">exitHooks</a> <a title="scala.collection.immutable.Set[sbt.ExitHook]" id="2116680">+</a> <a href="ExitHook.scala.html#2116677" title="(f: =&gt; Unit)sbt.ExitHook">ExitHook</a><span class="delimiter">(</span><a href="#2116324" title="=&gt; Unit">act</a><span class="delimiter">)</span><span class="delimiter">)</span>
		<span class="keyword">def</span> <a title="()sbt.State" id="2116134">runExitHooks</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#335315" title="sbt.State">State</a> = <span class="delimiter">{</span>
			<a href="ExitHook.scala.html#12824" title="object sbt.ExitHooks">ExitHooks</a>.<a href="ExitHook.scala.html#2116695" title="(exitHooks: Seq[sbt.ExitHook])Seq[Throwable]">runExitHooks</a><span class="delimiter">(</span><a href="#335318" title="sbt.State">s</a>.<a href="#416905" title="=&gt; Set[sbt.ExitHook]">exitHooks</a>.<span title="=&gt; Seq[sbt.ExitHook]">toSeq</span><span class="delimiter">)</span>
			<a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="xsbti.AppConfiguration" id="2116710">copy</a><span class="delimiter">(</span>exitHooks = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<a title="scala.collection.immutable.Set[sbt.ExitHook]" id="2116702">empty</a><span class="delimiter">)</span>
		<span class="delimiter">}</span>
		<span class="keyword">def</span> <a title="[T](file: java.io.File)(t: =&gt; T)T" id="2116135">locked</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="2116137">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.io.File" id="2116326">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="2116327">t</a>: =&gt; T<span class="delimiter">)</span>: <a href="#2116137" title="T">T</a> =
			<a href="#335318" title="sbt.State">s</a>.<a href="#416903" title="=&gt; xsbti.AppConfiguration">configuration</a>.<a href="xsbti/AppConfiguration.java.html#313282" title="()xsbti.AppProvider">provider</a>.<a href="xsbti/AppProvider.java.html#313262" title="()xsbti.ScalaProvider">scalaProvider</a>.<a href="xsbti/ScalaProvider.java.html#313496" title="()xsbti.Launcher">launcher</a>.<a href="xsbti/Launcher.java.html#312970" title="()xsbti.GlobalLock">globalLock</a>.<a href="xsbti/GlobalLock.java.html#244594" title="(lockFile: java.io.File, run: java.util.concurrent.Callable[T])T">apply</a><span class="delimiter">(</span><a href="#2116326" title="java.io.File">file</a>, <a href="#2116719" title="java.lang.Object with java.util.concurrent.Callable[T]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with java.util.concurrent.Callable[T]" id="2116719">Callable</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span> <span class="keyword">def</span> <a title="()T" id="2116723">call</a> = <a href="#2116327" title="=&gt; T">t</a> <span class="delimiter">}</span><span class="delimiter">)</span>
	<span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>